Already up-to-date.
make -C build-tools all
make[1]: Entering directory '/home/zededa-ci/src/zenbuild/build-tools'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/home/zededa-ci/src/zenbuild/build-tools'
From github.com:zededa/go-provision
   4fc6ce5..ea45c81  master     -> origin/master
Updating 4fc6ce5..ea45c81
Fast-forward
 pubsub/pubsub.go | 38 +++++++++++++++++++-------------------
 1 file changed, 19 insertions(+), 19 deletions(-)
Already up-to-date.
Building and pushing "zededa/lisp:9af280df18acc111572e4912dc1150a01c4e3f2c"
9af280df18acc111572e4912dc1150a01c4e3f2c: Pulling from zededa/lisp
Digest: sha256:e5ff460ce841516aa7d4836d2f4ecf9f077b60535f7416cf192350283da9a4e5
Status: Image is up to date for zededa/lisp:9af280df18acc111572e4912dc1150a01c4e3f2c
Building and pushing "zededa/lisp:latest"
Sending build context to Docker daemon  8.241MB
Step 1/19 : FROM golang:1.9.1-alpine AS go-build
 ---> cc52d0ad4cce
Step 2/19 : RUN apk update
 ---> Using cache
 ---> b0202011f9d2
Step 3/19 : RUN apk add --no-cache git gcc linux-headers libc-dev libpcap-dev
 ---> Using cache
 ---> e1e8ea822b21
Step 4/19 : ADD . /go/src/github.com/zededa/lisp
 ---> Using cache
 ---> 3034338bfaa3
Step 5/19 : RUN go install github.com/zededa/lisp/cmd/...
 ---> Using cache
 ---> d518c512eebc
Step 6/19 : FROM alpine:latest
 ---> f6df4608fa98
Step 7/19 : ARG LISP_URL=https://www.dropbox.com/s/ogfu5gaw550rlkq/zededa.tgz
 ---> Using cache
 ---> eff2a91d232b
Step 8/19 : RUN apk add --no-cache curl gcc linux-headers libc-dev python python-dev libffi-dev openssl-dev libpcap-dev iproute2 tcpdump ethtool ip6tables
 ---> Using cache
 ---> e5f0eb6132e4
Step 9/19 : RUN mkdir /lisp ; cd /lisp ; curl --insecure -L $LISP_URL | gzip -dc | tar -xf -
 ---> Using cache
 ---> a8a99f7d39c8
Step 10/19 : ADD scripts/sudo /usr/bin/sudo
 ---> Using cache
 ---> eedd737b983f
Step 11/19 : ADD conf scripts/RESTART-LISP scripts/RUN-LISP.rtr1 scripts/RUN-LISP scripts/STOP-LISP scripts/CONFIG-SVC scripts/RL scripts/pslisp /lisp/
 ---> Using cache
 ---> bfc0f154a4ba
Step 12/19 : RUN python /lisp/get-pip.py
 ---> Using cache
 ---> 9e7f6dc91433
Step 13/19 : RUN pip install -r /lisp/pip-requirements.txt
 ---> Using cache
 ---> 362d3661cb7b
Step 14/19 : RUN echo 'PS1="`hostname | cut -d . -f 0` > "' >> /root/.profile
 ---> Using cache
 ---> aab5aba85f40
Step 15/19 : COPY --from=go-build /go/bin/dataplane /lisp/lisp-ztr
 ---> Using cache
 ---> e008312ef67f
Step 16/19 : EXPOSE 8080
 ---> Using cache
 ---> 4e1d78943230
Step 17/19 : WORKDIR /lisp
 ---> Using cache
 ---> 93c1c15899f6
Step 18/19 : CMD ./CONFIG-SVC ; ./RL ; sleep 5 ; tail -f ./logs/*
 ---> Using cache
 ---> ba36ce2234f8
Step 19/19 : LABEL org.mobyproject.linuxkit.revision 'unknown' org.mobyproject.linuxkit.version 'unknown' org.opencontainers.image.revision '1f943cf8d035751540baf9b725ee5007e2dace4a' org.opencontainers.image.source 'https://github.com/linuxkit/linuxkit'
 ---> Using cache
 ---> 6a5f558d88cb
Successfully built 6a5f558d88cb
Successfully tagged zededa/lisp:latest-arm64
Pushing zededa/lisp:latest-arm64
The push refers to a repository [docker.io/zededa/lisp]
f89fa2325330: Preparing
43334a53c038: Preparing
470935b4c433: Preparing
0a5ac6a42103: Preparing
e33ca155579d: Preparing
ba1098918a0e: Preparing
9545cbdd9f5c: Preparing
d7e425d17ead: Preparing
05f52530ca7b: Preparing
58477411d607: Preparing
ba1098918a0e: Waiting
9545cbdd9f5c: Waiting
d7e425d17ead: Waiting
05f52530ca7b: Waiting
58477411d607: Waiting
f89fa2325330: Layer already exists
43334a53c038: Layer already exists
470935b4c433: Layer already exists
0a5ac6a42103: Layer already exists
e33ca155579d: Layer already exists
9545cbdd9f5c: Layer already exists
ba1098918a0e: Layer already exists
58477411d607: Layer already exists
d7e425d17ead: Layer already exists
05f52530ca7b: Layer already exists
latest-arm64: digest: sha256:9e86741993d80344524deceffa19be83c6fd4b5afc3e2e961dfda713f25a63db size: 2415
Pushing zededa/lisp:latest-arm64 to manifest zededa/lisp:latest
time="2018-06-13T08:00:17+02:00" level=warning msg="Couldn't find or access image reference \"zededa/lisp:latest-s390x\". Skipping image."
Digest: sha256:f1f48ce7187d477dbc356682e1cd66258f1cc21c03aff9399e6d96b0ba48c767 743
Not signing zededa/lisp:latest
Build and push complete, not releasing, all done.
Building and pushing "zededa/ztools:66f660f03eb27c884b4505cb532edb520cf4d289"
66f660f03eb27c884b4505cb532edb520cf4d289: Pulling from zededa/ztools
no matching manifest for linux/arm64 in the manifest list entries
No image pulled, continuing with build
Sending build context to Docker daemon  19.85MB
Step 1/34 : FROM golang:1.9.1-alpine AS build
 ---> cc52d0ad4cce
Step 2/34 : RUN apk update
 ---> Using cache
 ---> b0202011f9d2
Step 3/34 : RUN apk add --no-cache git gcc linux-headers libc-dev util-linux
 ---> Using cache
 ---> 648257fc5dd9
Step 4/34 : ADD ./ /go/src/github.com/zededa/go-provision/
 ---> b45a373f4772
Step 5/34 : ADD etc /config
 ---> 0ac616ef08f6
Step 6/34 : ADD scripts/device-steps.sh scripts/find-uplink.sh scripts/generate-device.sh scripts/generate-self-signed.sh scripts/handlezedserverconfig.sh /opt/zededa/bin/
 ---> 58a690d0245a
Step 7/34 : ADD examples /opt/zededa/examples
 ---> 823372c78c66
Step 8/34 : ADD AssignableAdapters /var/tmp/zededa/AssignableAdapters
 ---> 9c12af98bee2
Step 9/34 : ADD DeviceNetworkConfig /var/tmp/zededa/DeviceNetworkConfig
 ---> 3cb238cf21a8
Step 10/34 : ADD lisp.config.base /var/tmp/zededa/lisp.config.base
 ---> a058e3c8e892
Step 11/34 : RUN (cd ./src/github.com/zededa/go-provision/; scripts/getversion.sh >/opt/zededa/bin/versioninfo)
 ---> Running in 0b8fb9458962
 ---> 79d2af51d7bb
Removing intermediate container 0b8fb9458962
Step 12/34 : RUN cp /opt/zededa/bin/versioninfo /opt/zededa/bin/versioninfo.1
 ---> Running in 9a78a714d7ca
 ---> 9eef248010fc
Removing intermediate container 9a78a714d7ca
Step 13/34 : RUN echo Building: `cat /opt/zededa/bin/versioninfo`
 ---> Running in e3f3dd720956
Building: 20180314-test-ea45c815-2018-06-13.06.00
 ---> 6dc4b5053ef3
Removing intermediate container e3f3dd720956
Step 14/34 : RUN go install github.com/zededa/go-provision/zedbox/...
 ---> Running in 1ab829713d58
 ---> 39bde4c36bdc
Removing intermediate container 1ab829713d58
Step 15/34 : RUN cd /opt/zededa/bin ; ln -s /go/bin/* .
 ---> Running in 6b2ea1785a13
 ---> 5a7150dfab1b
Removing intermediate container 6b2ea1785a13
Step 16/34 : RUN cd /opt/zededa/bin ; ln -s zedbox client; ln -s zedbox domainmgr; ln -s zedbox downloader; ln -s zedbox eidregister; ln -s zedbox hardwaremodel; ln -s zedbox identitymgr; ln -s zedbox ledmanager; ln -s zedbox logmanager; ln -s zedbox verifier; ln -s zedbox zedagent; ln -s zedbox zedmanager; ln -s zedbox zedrouter
 ---> Running in abae33554e14
 ---> dcbba1269ae3
Removing intermediate container abae33554e14
Step 17/34 : FROM zededa/lisp:latest AS lisp
 ---> 8c611457d2fd
Step 18/34 : FROM scratch
 ---> 
Step 19/34 : COPY --from=build /opt/zededa/bin /opt/zededa/bin
 ---> 7f7d59089903
Step 20/34 : COPY --from=build /opt/zededa/examples /opt/zededa/examples
 ---> a2fe1eaf158d
Step 21/34 : COPY --from=build /var/tmp/zededa/AssignableAdapters /var/tmp/zededa/AssignableAdapters
 ---> 7b830a2d5df2
Step 22/34 : COPY --from=build /var/tmp/zededa/DeviceNetworkConfig /var/tmp/zededa/DeviceNetworkConfig
 ---> 3256281231ec
Step 23/34 : COPY --from=build /var/tmp/zededa/lisp.config.base /var/tmp/zededa/lisp.config.base
 ---> fd2f36b14b0c
Step 24/34 : COPY --from=build /config /opt/zededa/examples/config
 ---> a3588a756a84
Step 25/34 : COPY --from=build /go/bin/* /opt/zededa/bin/
 ---> 6f962724ad47
Step 26/34 : COPY --from=lisp /lisp/lisp-ztr /opt/zededa/bin/
COPY failed: stat /var/lib/docker/btrfs/subvolumes/f067a25ebae056a6a0b3f7300777b04640debae6de95ecc5de9974c81e43ab7f/lisp/lisp-ztr: no such file or directory
exit status 1
Building and pushing "zededa/ztools:latest"
Sending build context to Docker daemon  19.85MB
Step 1/34 : FROM golang:1.9.1-alpine AS build
 ---> cc52d0ad4cce
Step 2/34 : RUN apk update
 ---> Using cache
 ---> b0202011f9d2
Step 3/34 : RUN apk add --no-cache git gcc linux-headers libc-dev util-linux
 ---> Using cache
 ---> 648257fc5dd9
Step 4/34 : ADD ./ /go/src/github.com/zededa/go-provision/
 ---> Using cache
 ---> b45a373f4772
Step 5/34 : ADD etc /config
 ---> Using cache
 ---> 0ac616ef08f6
Step 6/34 : ADD scripts/device-steps.sh scripts/find-uplink.sh scripts/generate-device.sh scripts/generate-self-signed.sh scripts/handlezedserverconfig.sh /opt/zededa/bin/
 ---> Using cache
 ---> 58a690d0245a
Step 7/34 : ADD examples /opt/zededa/examples
 ---> Using cache
 ---> 823372c78c66
Step 8/34 : ADD AssignableAdapters /var/tmp/zededa/AssignableAdapters
 ---> Using cache
 ---> 9c12af98bee2
Step 9/34 : ADD DeviceNetworkConfig /var/tmp/zededa/DeviceNetworkConfig
 ---> Using cache
 ---> 3cb238cf21a8
Step 10/34 : ADD lisp.config.base /var/tmp/zededa/lisp.config.base
 ---> Using cache
 ---> a058e3c8e892
Step 11/34 : RUN (cd ./src/github.com/zededa/go-provision/; scripts/getversion.sh >/opt/zededa/bin/versioninfo)
 ---> Using cache
 ---> 79d2af51d7bb
Step 12/34 : RUN cp /opt/zededa/bin/versioninfo /opt/zededa/bin/versioninfo.1
 ---> Using cache
 ---> 9eef248010fc
Step 13/34 : RUN echo Building: `cat /opt/zededa/bin/versioninfo`
 ---> Using cache
 ---> 6dc4b5053ef3
Step 14/34 : RUN go install github.com/zededa/go-provision/zedbox/...
 ---> Using cache
 ---> 39bde4c36bdc
Step 15/34 : RUN cd /opt/zededa/bin ; ln -s /go/bin/* .
 ---> Using cache
 ---> 5a7150dfab1b
Step 16/34 : RUN cd /opt/zededa/bin ; ln -s zedbox client; ln -s zedbox domainmgr; ln -s zedbox downloader; ln -s zedbox eidregister; ln -s zedbox hardwaremodel; ln -s zedbox identitymgr; ln -s zedbox ledmanager; ln -s zedbox logmanager; ln -s zedbox verifier; ln -s zedbox zedagent; ln -s zedbox zedmanager; ln -s zedbox zedrouter
 ---> Using cache
 ---> dcbba1269ae3
Step 17/34 : FROM zededa/lisp:latest AS lisp
 ---> 8c611457d2fd
Step 18/34 : FROM scratch
 ---> 
Step 19/34 : COPY --from=build /opt/zededa/bin /opt/zededa/bin
 ---> Using cache
 ---> 7f7d59089903
Step 20/34 : COPY --from=build /opt/zededa/examples /opt/zededa/examples
 ---> Using cache
 ---> a2fe1eaf158d
Step 21/34 : COPY --from=build /var/tmp/zededa/AssignableAdapters /var/tmp/zededa/AssignableAdapters
 ---> Using cache
 ---> 7b830a2d5df2
Step 22/34 : COPY --from=build /var/tmp/zededa/DeviceNetworkConfig /var/tmp/zededa/DeviceNetworkConfig
 ---> Using cache
 ---> 3256281231ec
Step 23/34 : COPY --from=build /var/tmp/zededa/lisp.config.base /var/tmp/zededa/lisp.config.base
 ---> Using cache
 ---> fd2f36b14b0c
Step 24/34 : COPY --from=build /config /opt/zededa/examples/config
 ---> Using cache
 ---> a3588a756a84
Step 25/34 : COPY --from=build /go/bin/* /opt/zededa/bin/
 ---> Using cache
 ---> 6f962724ad47
Step 26/34 : COPY --from=lisp /lisp/lisp-ztr /opt/zededa/bin/
COPY failed: stat /var/lib/docker/btrfs/subvolumes/7263c3b1e1d8b352a70041b4205ba602348149c553bc06d70ef12d643effba1d/lisp/lisp-ztr: no such file or directory
exit status 1
make: Entering directory '/home/zededa-ci/src/zenbuild/pkg'
(cd ..; ./parse-pkgs.sh pkg/qrexec-lib/Dockerfile.in > pkg/qrexec-lib/Dockerfile)
(cd ..; ./parse-pkgs.sh pkg/qrexec-dom0/Dockerfile.in > pkg/qrexec-dom0/Dockerfile)
(cd ..; ./parse-pkgs.sh pkg/zedctr/Dockerfile.in > pkg/zedctr/Dockerfile)
(cd ..; ./parse-pkgs.sh pkg/mkconf/Dockerfile.in > pkg/mkconf/Dockerfile)
Building and pushing "zededa/grub:35eb3c470422d1bced11f3457ea8ff432d9f0590"
35eb3c470422d1bced11f3457ea8ff432d9f0590: Pulling from zededa/grub
Digest: sha256:6cd267b4fdc5cd2a9b7ff7a98087051d26b58d6d703e06c9901e12c60505cf68
Status: Image is up to date for zededa/grub:35eb3c470422d1bced11f3457ea8ff432d9f0590
Building and pushing "zededa/xen:07f48fb845ebcbb4327b6493875a846d0e4ffd3b"
07f48fb845ebcbb4327b6493875a846d0e4ffd3b: Pulling from zededa/xen
Digest: sha256:9495b7e0bf6ac771b9581694fa517c79c467377bb3834685f02f3bdf548190be
Status: Image is up to date for zededa/xen:07f48fb845ebcbb4327b6493875a846d0e4ffd3b
Building and pushing "zededa/kernel:12728da3c85656066cc70dbaa535e5a2e5a79c57"
12728da3c85656066cc70dbaa535e5a2e5a79c57: Pulling from zededa/kernel
Digest: sha256:ec918bc3cba165c9ac1f7c2442fa585af08eeb271ceae0c8b72ba70b13738396
Status: Image is up to date for zededa/kernel:12728da3c85656066cc70dbaa535e5a2e5a79c57
Building and pushing "zededa/xen-tools:ccc3ab24a38b4680bdbe4c204cc628026e7584a7"
ccc3ab24a38b4680bdbe4c204cc628026e7584a7: Pulling from zededa/xen-tools
Digest: sha256:42953f7af8477117cfd4732167d1ff1ffb7ac5f47051143b9d2c200d6c2dc98b
Status: Image is up to date for zededa/xen-tools:ccc3ab24a38b4680bdbe4c204cc628026e7584a7
Building and pushing "zededa/dnsmasq:e2de7e6a478850d931724f951f877cd507d77358"
e2de7e6a478850d931724f951f877cd507d77358: Pulling from zededa/dnsmasq
Digest: sha256:4837b9913437c3311f5eaf4e6288f193a41bf475a24f0e3ed96e7e0ebf7f14af
Status: Image is up to date for zededa/dnsmasq:e2de7e6a478850d931724f951f877cd507d77358
Building and pushing "zededa/strongswan:16f07aee796ef18fd346261cd499213c3807a255"
16f07aee796ef18fd346261cd499213c3807a255: Pulling from zededa/strongswan
Digest: sha256:b41f625a6d4e23156cf66d56693f3f3be7efb382e3fac0a1ede602d25f7cd714
Status: Downloaded newer image for zededa/strongswan:16f07aee796ef18fd346261cd499213c3807a255
Building and pushing "zededa/gpt-tools:f0be39997551891e81c6edc38acc20f61077287b"
f0be39997551891e81c6edc38acc20f61077287b: Pulling from zededa/gpt-tools
Digest: sha256:8efde3a21d832294ec111dd5e8b156e016e1843b7331e31fd34aaec7e5cf7e0a
Status: Image is up to date for zededa/gpt-tools:f0be39997551891e81c6edc38acc20f61077287b
Building and pushing "zededa/dom0-ztools:c6d8f2123c748379add5d3dbbac23e3630131760"
c6d8f2123c748379add5d3dbbac23e3630131760: Pulling from zededa/dom0-ztools
Digest: sha256:20682cf32f7d42f72fc3fb0bec8bbb8b28b12ef24ba8628eab587d6710d42ef5
Status: Image is up to date for zededa/dom0-ztools:c6d8f2123c748379add5d3dbbac23e3630131760
Building and pushing "zededa/qrexec-lib:2e0df0df95f86df6953d7d2e7729213b77fd7206"
2e0df0df95f86df6953d7d2e7729213b77fd7206: Pulling from zededa/qrexec-lib
Digest: sha256:c67be2ae74df9df68c42f87e8fa6f5c09841517fa5c9e2685ed7893857163c2c
Status: Image is up to date for zededa/qrexec-lib:2e0df0df95f86df6953d7d2e7729213b77fd7206
Building and pushing "zededa/qrexec-dom0:2c3cf9b135409690eaa86092c41f7c800d398468"
2c3cf9b135409690eaa86092c41f7c800d398468: Pulling from zededa/qrexec-dom0
Digest: sha256:4789060748d9ca3f3e33a31cb089aec797e3427b183fd4eaf1910896a01ba11d
Status: Image is up to date for zededa/qrexec-dom0:2c3cf9b135409690eaa86092c41f7c800d398468
Building and pushing "zededa/wwan:addf826bbc6885c0a28cd8f018f69cadaca4674f"
addf826bbc6885c0a28cd8f018f69cadaca4674f: Pulling from zededa/wwan
Digest: sha256:0dcf1fdff6cb8a4df7da25a1d0c80ce758f469f80e8dd59f6cb0f801fb676064
Status: Image is up to date for zededa/wwan:addf826bbc6885c0a28cd8f018f69cadaca4674f
Building and pushing "zededa/wlan:cfd366430df0620df11b2af7f3d9d63d617a5903"
cfd366430df0620df11b2af7f3d9d63d617a5903: Pulling from zededa/wlan
Digest: sha256:641dbf64cb41e3bf9ef740d4125300f2c96eb649aba239f23595344fdc839fac
Status: Image is up to date for zededa/wlan:cfd366430df0620df11b2af7f3d9d63d617a5903
Building and pushing "zededa/watchdog:3e77cbcffbf4f71309bab82500039967bca0d189"
3e77cbcffbf4f71309bab82500039967bca0d189: Pulling from zededa/watchdog
Digest: sha256:4607e395788c445aebd51a4cd6127de828029f565d3e1d65b56668ff66a60d45
Status: Image is up to date for zededa/watchdog:3e77cbcffbf4f71309bab82500039967bca0d189
Building and pushing "zededa/device-trees:1bca882c64827de08bba9aa7713441b2b4d7ca8d"
1bca882c64827de08bba9aa7713441b2b4d7ca8d: Pulling from zededa/device-trees
Digest: sha256:633a8d6650050e3d128b3d44e70c93adeb0dddfab1261269eabe64eaf2173d81
Status: Image is up to date for zededa/device-trees:1bca882c64827de08bba9aa7713441b2b4d7ca8d
Building and pushing "zededa/zedctr:5e26a3010a421087197f1c9588791dac02fa1ba4"
5e26a3010a421087197f1c9588791dac02fa1ba4: Pulling from zededa/zedctr
Digest: sha256:b2280cb0471a5ea36b0986afebf6f720fa55415bb741488ea8cc91c6b879b28e
Status: Downloaded newer image for zededa/zedctr:5e26a3010a421087197f1c9588791dac02fa1ba4
Building and pushing "zededa/conf:4992a3a63c95b0e446c681a0deaca7a071aba709"
4992a3a63c95b0e446c681a0deaca7a071aba709: Pulling from zededa/conf
Digest: sha256:c1ee0f9ac20c9f49c70e16f892fd37258bf2c7567ad2de976dd5f67a982b324a
Status: Image is up to date for zededa/conf:4992a3a63c95b0e446c681a0deaca7a071aba709
Building and pushing "zededa/mkrootfs-ext4:5f77cd6a2b87a3a9927593763da1941dbed1ce80"
5f77cd6a2b87a3a9927593763da1941dbed1ce80: Pulling from zededa/mkrootfs-ext4
Digest: sha256:dde944fb6507c3a230ac5d15d0bc11db194286e276ac50913515a69e2e2c933d
Status: Image is up to date for zededa/mkrootfs-ext4:5f77cd6a2b87a3a9927593763da1941dbed1ce80
Building and pushing "zededa/mkrootfs-squash:b47d705603f5f0d3765b03cf583e1a7fd287f212"
b47d705603f5f0d3765b03cf583e1a7fd287f212: Pulling from zededa/mkrootfs-squash
Digest: sha256:c983454763003736ee372074ab84f80745aa40ae18245f250985f2c593d4a707
Status: Image is up to date for zededa/mkrootfs-squash:b47d705603f5f0d3765b03cf583e1a7fd287f212
Building and pushing "zededa/mkflash:362411f3b96bd6054f97237f5a7382912aebb349"
362411f3b96bd6054f97237f5a7382912aebb349: Pulling from zededa/mkflash
Digest: sha256:b03191ae8badd063541f2eea5d62a84b3a5f605d1533091f45ec752bd013108d
Status: Image is up to date for zededa/mkflash:362411f3b96bd6054f97237f5a7382912aebb349
Building and pushing "zededa/mkimage-iso-efi:49a6ff8320ce088460c8acb6f36bc15b15d800e9"
49a6ff8320ce088460c8acb6f36bc15b15d800e9: Pulling from zededa/mkimage-iso-efi
Digest: sha256:30c22ebf5ce49c8b9197e00936143ba511aa27b5fde11df0dcbd1806cb98ac35
Status: Image is up to date for zededa/mkimage-iso-efi:49a6ff8320ce088460c8acb6f36bc15b15d800e9
make: Leaving directory '/home/zededa-ci/src/zenbuild/pkg'
make: Entering directory '/home/zededa-ci/src/zenbuild/pkg'
(cd ..; ./parse-pkgs.sh pkg/zedctr//Dockerfile.in > pkg/zedctr//Dockerfile)
Building and pushing "zededa/zedctr:5e26a3010a421087197f1c9588791dac02fa1ba4"
Sending build context to Docker daemon  16.38kB
Step 1/20 : FROM zededa/ztools:latest as ztools
 ---> 6341cd92336a
Step 2/20 : FROM zededa/xen-tools:ccc3ab24a38b4680bdbe4c204cc628026e7584a7-arm64 as xen-tools
 ---> 9338796f340c
Step 3/20 : FROM zededa/dnsmasq:e2de7e6a478850d931724f951f877cd507d77358-arm64 as dnsmasq
 ---> 1a0a9313ef5f
Step 4/20 : FROM zededa/strongswan:16f07aee796ef18fd346261cd499213c3807a255-arm64 as strongswan
 ---> 84a4f798f3fb
Step 5/20 : FROM zededa/gpt-tools:f0be39997551891e81c6edc38acc20f61077287b-arm64 as gpttools
 ---> bb17a51a6442
Step 6/20 : FROM zededa/watchdog:3e77cbcffbf4f71309bab82500039967bca0d189-arm64 as watchdog
 ---> 57e0cb5696a7
Step 7/20 : FROM alpine:3.6
 ---> a9277cb286bb
Step 8/20 : RUN apk add --no-cache     yajl xz bash openssl iptables ip6tables     apk-cron coreutils dmidecode sudo libbz2 libuuid ipset     libpcap libaio logrotate pixman glib curl radvd perl ethtool     openssh-server util-linux e2fsprogs
 ---> Running in 516d0295530d
fetch http://dl-cdn.alpinelinux.org/alpine/v3.6/main/aarch64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.6/community/aarch64/APKINDEX.tar.gz
(1/51) Installing apk-cron (1.0-r0)
(2/51) Installing ncurses-terminfo-base (6.0_p20171125-r0)
(3/51) Installing ncurses-terminfo (6.0_p20171125-r0)
(4/51) Installing ncurses-libs (6.0_p20171125-r0)
(5/51) Installing readline (6.3.008-r5)
(6/51) Installing bash (4.3.48-r1)
Executing bash-4.3.48-r1.post-install
(7/51) Installing libattr (2.4.47-r6)
(8/51) Installing libacl (2.2.52-r3)
(9/51) Installing coreutils (8.27-r0)
(10/51) Installing ca-certificates (20161130-r2)
(11/51) Installing libssh2 (1.8.0-r1)
(12/51) Installing libcurl (7.60.0-r1)
(13/51) Installing curl (7.60.0-r1)
(14/51) Installing dmidecode (3.0-r0)
(15/51) Installing libuuid (2.28.2-r2)
(16/51) Installing libblkid (2.28.2-r2)
(17/51) Installing libcom_err (1.43.4-r0)
(18/51) Installing e2fsprogs-libs (1.43.4-r0)
(19/51) Installing e2fsprogs (1.43.4-r0)
(20/51) Installing ethtool (4.10-r0)
(21/51) Installing libffi (3.2.1-r3)
(22/51) Installing libintl (0.19.8.1-r1)
(23/51) Installing libmount (2.28.2-r2)
(24/51) Installing pcre (8.41-r0)
(25/51) Installing glib (2.52.1-r0)
(26/51) Installing libmnl (1.0.4-r0)
(27/51) Installing libnftnl-libs (1.0.7-r0)
(28/51) Installing iptables (1.6.1-r0)
(29/51) Installing ip6tables (1.6.1-r0)
(30/51) Installing ipset (6.32-r3)
(31/51) Installing libaio (0.3.110-r0)
(32/51) Installing libbz2 (1.0.6-r5)
(33/51) Installing libpcap (1.8.1-r0)
(34/51) Installing popt (1.16-r6)
(35/51) Installing logrotate (3.12.2-r0)
(36/51) Installing openssh-keygen (7.5_p1-r2)
(37/51) Installing openssh-server (7.5_p1-r2)
(38/51) Installing libcrypto1.0 (1.0.2o-r0)
(39/51) Installing libssl1.0 (1.0.2o-r0)
(40/51) Installing openssl (1.0.2o-r0)
(41/51) Installing perl (5.24.4-r0)
(42/51) Installing pixman (0.34.0-r0)
(43/51) Installing radvd (2.15-r0)
Executing radvd-2.15-r0.pre-install
(44/51) Installing sudo (1.8.19_p2-r0)
(45/51) Installing libsmartcols (2.28.2-r2)
(46/51) Installing findmnt (2.28.2-r2)
(47/51) Installing libfdisk (2.28.2-r2)
(48/51) Installing util-linux (2.28.2-r2)
(49/51) Installing xz-libs (5.2.3-r0)
(50/51) Installing xz (5.2.3-r0)
(51/51) Installing yajl (2.1.0-r0)
Executing busybox-1.26.2-r5.trigger
Executing ca-certificates-20161130-r2.trigger
Executing glib-2.52.1-r0.trigger
OK: 72 MiB in 62 packages
 ---> e8ee725efd86
Removing intermediate container 516d0295530d
Step 9/20 : RUN [ `uname -m` = "aarch64" ] && apk add --no-cache libfdt || :
 ---> Running in 6205924dde3b
fetch http://dl-cdn.alpinelinux.org/alpine/v3.6/main/aarch64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.6/community/aarch64/APKINDEX.tar.gz
(1/1) Installing libfdt (1.4.4-r0)
OK: 72 MiB in 63 packages
 ---> eeb7571d2394
Removing intermediate container 6205924dde3b
Step 10/20 : RUN ln -s libpcap.so.1 /usr/lib/libpcap.so
 ---> Running in 23f57792dd23
 ---> 37321c5f9ad2
Removing intermediate container 23f57792dd23
Step 11/20 : RUN ssh-keygen -A ; echo PermitRootLogin yes >> /etc/ssh/sshd_config ; sed -ie '/^root/s#^.*$#root:$6$Ndt1G5AYZFQ8rz7m$7vGZMKKotSYxwxk/.jMfuOCzxw0I3DNedygaQaLF7kYSYsLqiBHhmc8RJSXp8/VxSYPpgYSz/8fkv0hO6I4js.:17477:0:::::#' /etc/shadow
 ---> Running in a2f24b3ec347
ssh-keygen: generating new host keys: RSA DSA ECDSA ED25519 
 ---> 97dfedc99e2c
Removing intermediate container a2f24b3ec347
Step 12/20 : COPY --from=xen-tools / /
 ---> 5d7490167f56
Step 13/20 : COPY --from=ztools / /
 ---> e7136c04c056
Step 14/20 : COPY --from=gpttools / /
 ---> 2936f0ecdf69
Step 15/20 : COPY --from=dnsmasq /usr/sbin/dnsmasq /opt/zededa/bin/dnsmasq
 ---> 90728606ed83
Step 16/20 : COPY --from=strongswan / /
 ---> 127583679037
Step 17/20 : COPY --from=watchdog /usr/sbin /usr/sbin
 ---> b9c2e6692bfd
Step 18/20 : COPY rootfs/ /
 ---> 92d6553c5495
Step 19/20 : CMD /init.sh
 ---> Running in 286992dbed5b
 ---> fd967da60852
Removing intermediate container 286992dbed5b
Step 20/20 : LABEL org.mobyproject.config '{"capabilities":["all"],"binds":["/dev:/dev","/etc/resolv.conf:/etc/resolv.conf","/run:/run","/var/log:/var/log/dom0","/:/hostfs"],"net":"host","pid":"host"}' org.mobyproject.linuxkit.revision 'unknown' org.mobyproject.linuxkit.version 'unknown' org.opencontainers.image.revision '7a4fc0e23c90e59d4059b26780a760a56801c113' org.opencontainers.image.source 'https://github.com/linuxkit/linuxkit'
 ---> Running in ca0a200e0e70
 ---> 37ff84d56e2f
Removing intermediate container ca0a200e0e70
Successfully built 37ff84d56e2f
Successfully tagged zededa/zedctr:5e26a3010a421087197f1c9588791dac02fa1ba4-arm64
Pushing zededa/zedctr:5e26a3010a421087197f1c9588791dac02fa1ba4-arm64
The push refers to a repository [docker.io/zededa/zedctr]
ad17d696927e: Preparing
5ee50c656449: Preparing
d41ffd16ff1c: Preparing
5222d0b4cbc2: Preparing
3edd81ed8cbc: Preparing
981b7b269978: Preparing
ea863c8b2659: Preparing
3391a49c2a5f: Preparing
c54dc5c44441: Preparing
272221be692a: Preparing
2447a277006b: Preparing
7678a2257549: Preparing
199db0687ace: Preparing
3391a49c2a5f: Waiting
c54dc5c44441: Waiting
272221be692a: Waiting
2447a277006b: Waiting
7678a2257549: Waiting
981b7b269978: Waiting
ea863c8b2659: Waiting
199db0687ace: Waiting
3edd81ed8cbc: Layer already exists
ad17d696927e: Layer already exists
981b7b269978: Layer already exists
d41ffd16ff1c: Layer already exists
ea863c8b2659: Layer already exists
5ee50c656449: Pushed
5222d0b4cbc2: Pushed
7678a2257549: Layer already exists
c54dc5c44441: Pushed
199db0687ace: Layer already exists
272221be692a: Pushed
3391a49c2a5f: Pushed
2447a277006b: Pushed
5e26a3010a421087197f1c9588791dac02fa1ba4-arm64: digest: sha256:ffa1609e6cceed5567479b5b1d96492929fd615c90e36de4bd1cec2b18d7c135 size: 3047
Pushing zededa/zedctr:5e26a3010a421087197f1c9588791dac02fa1ba4-arm64 to manifest zededa/zedctr:5e26a3010a421087197f1c9588791dac02fa1ba4
time="2018-06-13T08:04:26+02:00" level=warning msg="Couldn't find or access image reference \"zededa/zedctr:5e26a3010a421087197f1c9588791dac02fa1ba4-s390x\". Skipping image."
Digest: sha256:6ba6c97a363f71616bb1d2bc20d98292bd31727b29561785d4adf57d7d389898 743
Not signing zededa/zedctr:5e26a3010a421087197f1c9588791dac02fa1ba4
Build and push complete, not releasing, all done.
make: Leaving directory '/home/zededa-ci/src/zenbuild/pkg'
make: Entering directory '/home/zededa-ci/src/zenbuild/build-pkgs'
Building and pushing "zededa/build-pkgs_abuild:7ae4d9f9fa290963de466d5ed96d6c9318354824"
7ae4d9f9fa290963de466d5ed96d6c9318354824: Pulling from zededa/build-pkgs_abuild
Digest: sha256:6b128844f5ca92dd2c1ab69701fd6d65cc954934074aa23a8b1c5a16cafca7bd
Status: Image is up to date for zededa/build-pkgs_abuild:7ae4d9f9fa290963de466d5ed96d6c9318354824
Building and pushing "zededa/build-pkgs_uefi:a3362428c518fb4db1a136a961bd17e8a66fb693"
a3362428c518fb4db1a136a961bd17e8a66fb693: Pulling from zededa/build-pkgs_uefi
Digest: sha256:e5b5282993c40b2eb160b8c6d2a916e3fa5e372367ce2d972633184dee99701a
Status: Image is up to date for zededa/build-pkgs_uefi:a3362428c518fb4db1a136a961bd17e8a66fb693
make: Leaving directory '/home/zededa-ci/src/zenbuild/build-pkgs'
cd bios ; _() { C=`docker create $1 fake` ; docker export $C | tar -xf - $2 ; docker rm $C ; } ; _ zededa/build-pkgs_uefi:a3362428c518fb4db1a136a961bd17e8a66fb693-arm64 OVMF.fd
51a14c215b2c2d285a14a71ff81b83b8f5a5265071e4cd734a3c2d9ab266b0ce
tee: /dev/tty: No such device or address
5e26a3010a421087197f1c9588791dac02fa1ba4-arm64: Pulling from zededa/zedctr
Digest: sha256:ffa1609e6cceed5567479b5b1d96492929fd615c90e36de4bd1cec2b18d7c135
Status: Image is up to date for zededa/zedctr:5e26a3010a421087197f1c9588791dac02fa1ba4-arm64
DOCKER_ARCH_TAG="arm64" ./parse-pkgs.sh images/installer.yml.in > images/installer.yml
# the following is a horrible hack that needs to go away ASAP
if [ "aarch64" != `uname -m` ] ; then \
           sed -e '/source:/s#rootfs.img#rootfs_aarch64.img#' \
               -e '/command:/s#/dev/sda#/dev/vda#' -i.orig images/installer.yml ;\
   echo "WARNING: We are assembling a aarch64 image on `uname -m`. Things may break." ;\
        fi
DOCKER_ARCH_TAG="arm64" ./parse-pkgs.sh images/rootfs.yml.in > images/rootfs.yml
# the following is a horrible hack that needs to go away ASAP
if [ "aarch64" != `uname -m` ] ; then \
           sed -e '/source:/s#rootfs.img#rootfs_aarch64.img#' \
               -e '/command:/s#/dev/sda#/dev/vda#' -i.orig images/rootfs.yml ;\
   echo "WARNING: We are assembling a aarch64 image on `uname -m`. Things may break." ;\
        fi
./makerootfs.sh images/rootfs.yml squash rootfs_aarch64.img
Extract kernel image: zededa/kernel:12728da3c85656066cc70dbaa535e5a2e5a79c57-arm64
Add init containers:
Process init image: zededa/grub:35eb3c470422d1bced11f3457ea8ff432d9f0590-arm64
Process init image: zededa/device-trees:1bca882c64827de08bba9aa7713441b2b4d7ca8d-arm64
Process init image: zededa/xen:07f48fb845ebcbb4327b6493875a846d0e4ffd3b-arm64
Process init image: zededa/gpt-tools:f0be39997551891e81c6edc38acc20f61077287b-arm64
Process init image: zededa/dom0-ztools:c6d8f2123c748379add5d3dbbac23e3630131760-arm64
Process init image: linuxkit/init:v0.3
Process init image: linuxkit/runc:v0.3
Process init image: linuxkit/containerd:v0.3
Process init image: linuxkit/getty:v0.3
Add onboot containers:
  Create OCI config for linuxkit/sysctl:v0.3
  Create OCI config for linuxkit/modprobe:v0.3
Add service containers:
  Create OCI config for linuxkit/dhcpcd:v0.3
  Create OCI config for linuxkit/openntpd:v0.3
  Create OCI config for zededa/wwan:addf826bbc6885c0a28cd8f018f69cadaca4674f-arm64
  Create OCI config for zededa/wlan:cfd366430df0620df11b2af7f3d9d63d617a5903-arm64
  Create OCI config for zededa/zedctr:5e26a3010a421087197f1c9588791dac02fa1ba4-arm64
Add files:
  /containers/services/zededa-tools/lower/opt/zededa/bin/versioninfo
Parallel mksquashfs: Using 4 processors
Creating 4.0 filesystem on /rootfs.img, block size 131072.
[=============================================\              ] 11300/14631  77%[==================================================\         ] 12500/14631  85%[===========================================================-] 14631/14631 100%

Exportable Squashfs 4.0 filesystem, gzip compressed, data block size 131072
	compressed data, compressed metadata, compressed fragments, compressed xattrs
	duplicates are removed
Filesystem size 160515.43 Kbytes (156.75 Mbytes)
	31.60% of uncompressed filesystem size (508001.88 Kbytes)
Inode table size 154752 bytes (151.12 Kbytes)
	26.02% of uncompressed inode table size (594779 bytes)
Directory table size 158606 bytes (154.89 Kbytes)
	45.05% of uncompressed directory table size (352071 bytes)
Number of duplicate files found 2795
Number of inodes 15842
Number of files 11595
Number of fragments 779
Number of symbolic links  2942
Number of device nodes 8
Number of fifo nodes 0
Number of socket nodes 0
Number of directories 1297
Number of ids (unique uids + gids) 3
Number of uids 1
	root (0)
Number of gids 3
	root (0)
	shadow (42)
	tty (5)
./makeiso.sh images/installer.yml installer_aarch64.iso
Extract kernel image: zededa/kernel:12728da3c85656066cc70dbaa535e5a2e5a79c57-arm64
Add init containers:
Process init image: zededa/grub:35eb3c470422d1bced11f3457ea8ff432d9f0590-arm64
Process init image: zededa/device-trees:1bca882c64827de08bba9aa7713441b2b4d7ca8d-arm64
Process init image: zededa/xen:07f48fb845ebcbb4327b6493875a846d0e4ffd3b-arm64
Process init image: linuxkit/init:v0.3
Process init image: linuxkit/runc:v0.3
Process init image: linuxkit/getty:v0.3
Add onboot containers:
  Create OCI config for zededa/mkflash:362411f3b96bd6054f97237f5a7382912aebb349-arm64
Add files:
  /parts/config.img
  /parts/rootfs.img
time="2018-06-13T08:07:16+02:00" level=fatal msg="failed to add filesystem parts: open rootfs.img: no such file or directory"
xorriso 1.4.6 : RockRidge filesystem manipulator, libburnia project.

Drive current: -outdev 'stdio:linuxkit-efi.iso'
Media current: stdio file, overwriteable
Media status : is blank
Media summary: 0 sessions, 0 data blocks, 0 data,  874g free
Added to ISO image: directory '/'='/tmp/efi'
xorriso : UPDATE : 4673 files added in 1 seconds
xorriso : UPDATE : 4673 files added in 1 seconds
libisofs: NOTE : Cannot arrange content of data files in surely reproducible way
xorriso : UPDATE :  15.19% done
ISO image produced: 100093 sectors
Written to medium : 100093 sectors at LBA 0
Writing to 'stdio:linuxkit-efi.iso' completed successfully.

tar c rootfs_aarch64.img config.img | ./makeflash.sh -C 8192 fallback_aarch64.raw
1+0 records in
1+0 records out
1 byte copied, 0.0120572 s, 0.1 kB/s
+ IMGFILE=/output.img
+ NUMPARTS=9
+ mkdir -p /parts
+ [ -t 0 ]
+ cd /parts
+ bsdtar xzf -
+ ESP_FILE=/tmp/efifs.img
+ cut -f1 -d 
+ echo /parts/rootfs_aarch64.img
+ IMGA_FILE=/parts/rootfs_aarch64.img
+ CONF_FILE=/parts/config.img
+ mount -o loop /parts/rootfs_aarch64.img /mnt
mount: mounting /dev/loop0 on /mnt failed: Invalid argument
Makefile:150: recipe for target 'fallback_aarch64.raw' failed
make: *** [fallback_aarch64.raw] Error 111
make: Entering directory '/home/zededa-ci/src/zenbuild/build-pkgs'
Building and pushing "zededa/zenix:latest"
Sending build context to Docker daemon  517.3MB
Step 1/9 : FROM alpine:edge
 ---> 698b28d4f8d1
Step 2/9 : RUN apk add --no-cache qemu-system-x86_64 qemu-system-aarch64 bash make git
 ---> Using cache
 ---> 5b21459beb8b
Step 3/9 : COPY . /bits/
 ---> Using cache
 ---> c5f345eda82a
Step 4/9 : COPY OVMF.fd /bits/bios/OVMF.fd
 ---> Using cache
 ---> e342e4ec1c5c
Step 5/9 : COPY runme.sh /
 ---> Using cache
 ---> c300c2ff8dc7
Step 6/9 : RUN touch /bits/bios/OVMF.fd
 ---> Using cache
 ---> 85b9a3f966f3
Step 7/9 : WORKDIR /bits
 ---> Using cache
 ---> b59a8adaf13d
Step 8/9 : ENTRYPOINT /runme.sh
 ---> Using cache
 ---> a2c4b6771d85
Step 9/9 : LABEL org.mobyproject.linuxkit.revision 'unknown' org.mobyproject.linuxkit.version 'unknown' org.opencontainers.image.revision '7a4fc0e23c90e59d4059b26780a760a56801c113' org.opencontainers.image.source 'https://github.com/linuxkit/linuxkit'
 ---> Using cache
 ---> 601f82f31edf
Successfully built 601f82f31edf
Successfully tagged zededa/zenix:latest-arm64
Pushing zededa/zenix:latest-arm64
The push refers to a repository [docker.io/zededa/zenix]
96feea203423: Preparing
c96588d795bb: Preparing
5ef670ff3c99: Preparing
841a93c06d96: Preparing
18d6c5bbfc56: Preparing
7f4507898901: Preparing
2a2e682c36db: Preparing
7f4507898901: Waiting
2a2e682c36db: Waiting
841a93c06d96: Layer already exists
96feea203423: Layer already exists
5ef670ff3c99: Layer already exists
c96588d795bb: Layer already exists
18d6c5bbfc56: Layer already exists
7f4507898901: Layer already exists
2a2e682c36db: Layer already exists
latest-arm64: digest: sha256:03dde324461d54f47cb747cf2bc308857b62e86cda21da400ecf34417590a816 size: 1787
Pushing zededa/zenix:latest-arm64 to manifest zededa/zenix:latest
time="2018-06-13T08:08:15+02:00" level=warning msg="Couldn't find or access image reference \"zededa/zenix:latest-s390x\". Skipping image."
Digest: sha256:759bce5e1cac67b6606719825bd1778231a612ec2543599f7e93f9a1f4d5aedb 743
Not signing zededa/zenix:latest
Build and push complete, not releasing, all done.
make: Leaving directory '/home/zededa-ci/src/zenbuild/build-pkgs'
FINISHED
