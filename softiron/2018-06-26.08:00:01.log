Already up-to-date.
make -C build-tools all
make[1]: Entering directory '/home/zededa-ci/src/zenbuild/build-tools'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/home/zededa-ci/src/zenbuild/build-tools'
From github.com:zededa/go-provision
   09ecaf7..e2933fa  master     -> origin/master
   b0c6f71..e2933fa  bridge     -> origin/bridge
   1d9e16e..e2933fa  fixes      -> origin/fixes
Updating 09ecaf7..e2933fa
Fast-forward
 cmd/zedagent/handlenetworkobject.go  |  35 ++++++
 cmd/zedagent/handlenetworkservice.go |  34 +++++
 cmd/zedagent/parseconfig.go          |   2 +
 cmd/zedagent/zedagent.go             |  33 +++++
 cmd/zedrouter/ipsec.go               |   2 +
 cmd/zedrouter/iptables.go            |   9 +-
 cmd/zedrouter/networkobject.go       |  30 +++--
 cmd/zedrouter/pbr.go                 |  91 +++++++++++---
 cmd/zedrouter/service.go             | 236 +++++++++++++++++++++++++++++------
 cmd/zedrouter/strongswan.go          |  17 ++-
 cmd/zedrouter/zedrouter.go           |  83 +++++++-----
 types/zedroutertypes.go              |   2 +
 12 files changed, 466 insertions(+), 108 deletions(-)
 create mode 100644 cmd/zedagent/handlenetworkobject.go
 create mode 100644 cmd/zedagent/handlenetworkservice.go
From github.com:zededa/lisp
   b539ed8..a0a691d  master     -> origin/master
Updating b539ed8..a0a691d
Fast-forward
 Dockerfile        | 11 +++++++++--
 scripts/STOP-LISP |  2 +-
 2 files changed, 10 insertions(+), 3 deletions(-)
Building and pushing "zededa/lisp:0d02968ede183f2ba064e5736260ef9f6dbb8f20"
0d02968ede183f2ba064e5736260ef9f6dbb8f20: Pulling from zededa/lisp
no matching manifest for linux/arm64 in the manifest list entries
No image pulled, continuing with build
Sending build context to Docker daemon   8.47MB
Step 1/20 : FROM golang:1.9.1-alpine AS go-build
 ---> cc52d0ad4cce
Step 2/20 : RUN apk update
 ---> Using cache
 ---> b0202011f9d2
Step 3/20 : RUN apk add --no-cache git gcc linux-headers libc-dev libpcap-dev
 ---> Using cache
 ---> e1e8ea822b21
Step 4/20 : ADD . /go/src/github.com/zededa/lisp
 ---> d1fa0f373246
Step 5/20 : RUN go install github.com/zededa/lisp/cmd/...
 ---> Running in 7dee6c848c4d
 ---> 69dc5c90815e
Removing intermediate container 7dee6c848c4d
Step 6/20 : FROM alpine:3.6
 ---> a9277cb286bb
Step 7/20 : RUN apk add --no-cache curl gcc linux-headers libc-dev python python-dev libffi-dev openssl-dev libpcap-dev iproute2 tcpdump ethtool ip6tables
 ---> Running in ad919922b7dc
fetch http://dl-cdn.alpinelinux.org/alpine/v3.6/main/aarch64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.6/community/aarch64/APKINDEX.tar.gz
(1/47) Upgrading musl (1.1.16-r9 -> 1.1.16-r14)
(2/47) Installing ca-certificates (20161130-r2)
(3/47) Installing libssh2 (1.8.0-r1)
(4/47) Installing libcurl (7.60.0-r1)
(5/47) Installing curl (7.60.0-r1)
(6/47) Installing ethtool (4.10-r0)
(7/47) Installing binutils-libs (2.30-r1)
(8/47) Installing binutils (2.30-r1)
(9/47) Installing gmp (6.1.2-r0)
(10/47) Installing isl (0.17.1-r0)
(11/47) Installing libgomp (6.3.0-r4)
(12/47) Installing libatomic (6.3.0-r4)
(13/47) Installing libgcc (6.3.0-r4)
(14/47) Installing pkgconf (1.3.7-r0)
(15/47) Installing mpfr3 (3.1.5-r0)
(16/47) Installing mpc1 (1.0.3-r0)
(17/47) Installing libstdc++ (6.3.0-r4)
(18/47) Installing gcc (6.3.0-r4)
(19/47) Installing libmnl (1.0.4-r0)
(20/47) Installing libnftnl-libs (1.0.7-r0)
(21/47) Installing iptables (1.6.1-r0)
(22/47) Installing ip6tables (1.6.1-r0)
(23/47) Installing libelf (0.8.13-r2)
(24/47) Installing iproute2 (4.10.0-r1)
Executing iproute2-4.10.0-r1.post-install
(25/47) Installing musl-dev (1.1.16-r14)
(26/47) Installing libc-dev (0.7.1-r0)
(27/47) Upgrading musl-utils (1.1.16-r9 -> 1.1.16-r14)
(28/47) Installing libffi (3.2.1-r3)
(29/47) Installing libffi-dev (3.2.1-r3)
(30/47) Installing libpcap (1.8.1-r0)
(31/47) Installing libpcap-dev (1.8.1-r0)
(32/47) Installing linux-headers (4.4.6-r2)
(33/47) Installing zlib-dev (1.2.11-r0)
(34/47) Installing libcrypto1.0 (1.0.2o-r0)
(35/47) Installing libssl1.0 (1.0.2o-r0)
(36/47) Installing openssl-dev (1.0.2o-r0)
(37/47) Installing libbz2 (1.0.6-r5)
(38/47) Installing expat (2.2.0-r1)
(39/47) Installing gdbm (1.12-r0)
(40/47) Installing ncurses-terminfo-base (6.0_p20171125-r0)
(41/47) Installing ncurses-terminfo (6.0_p20171125-r0)
(42/47) Installing ncurses-libs (6.0_p20171125-r0)
(43/47) Installing readline (6.3.008-r5)
(44/47) Installing sqlite-libs (3.20.1-r2)
(45/47) Installing python2 (2.7.14-r0)
(46/47) Installing python2-dev (2.7.14-r0)
(47/47) Installing tcpdump (4.9.2-r0)
Executing busybox-1.26.2-r5.trigger
Executing ca-certificates-20161130-r2.trigger
OK: 181 MiB in 56 packages
 ---> 22c4198640c2
Removing intermediate container ad919922b7dc
Step 8/20 : RUN mkdir /lisp
 ---> Running in 674db5732321
 ---> a735a97af9aa
Removing intermediate container 674db5732321
Step 9/20 : ARG LISP_URL=https://www.dropbox.com/s/ogfu5gaw550rlkq/zededa.tgz
 ---> Running in 091f2bd745f9
 ---> e7b21c08194f
Removing intermediate container 091f2bd745f9
Step 10/20 : RUN cd /lisp ; curl --insecure -L $LISP_URL | gzip -dc | tar -xf -
 ---> Running in b700f82182fa
[91m  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0[0m[91m  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
[0m[91m  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0[0m[91m100 4986k  100 4986k    0     0  3499k      0  0:00:01  0:00:01 --:--:-- 7062k
[0m ---> cd58f592636e
Removing intermediate container b700f82182fa
Step 11/20 : ADD scripts/sudo /usr/bin/sudo
 ---> a1f724579c22
Step 12/20 : ADD conf scripts/RESTART-LISP scripts/RUN-LISP.rtr1 scripts/RUN-LISP scripts/STOP-LISP scripts/CONFIG-SVC scripts/RL scripts/pslisp scripts/log-packets scripts/ping-mesh.py /lisp/
 ---> 53fc18271b62
Step 13/20 : RUN python /lisp/get-pip.py
 ---> Running in 64862ff22e89
Downloading/unpacking pip
Downloading/unpacking setuptools
Installing collected packages: pip, setuptools
Successfully installed pip setuptools
Cleaning up...
 ---> 32045064af7f
Removing intermediate container 64862ff22e89
Step 14/20 : RUN pip install -r /lisp/pip-requirements.txt
 ---> Running in db291f670b19
Collecting CherryPy==8.2.0 (from -r /lisp/pip-requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/67/fc/fe110d5febf4e0988e041e5200a11f60855bcdaf2abd8ee1472b90956de0/CherryPy-8.2.0.tar.gz (710kB)
Collecting bottle==0.11.6 (from -r /lisp/pip-requirements.txt (line 3))
  Downloading https://files.pythonhosted.org/packages/42/a3/94991c7a132b2717ee2d147049e1bb0ba0596834069583aeee3c7fd7ea12/bottle-0.11.6-py2.py3-none-any.whl (77kB)
Collecting netifaces==0.10.0 (from -r /lisp/pip-requirements.txt (line 4))
  Downloading https://files.pythonhosted.org/packages/42/87/9092e7db7ed41fb4685fc8a108b318c09ebc646256de0ded02438b783a86/netifaces-0.10.0.tar.gz
Collecting pcappy==0.3 (from -r /lisp/pip-requirements.txt (line 5))
  Downloading https://files.pythonhosted.org/packages/17/47/a433257c1dd49afb69d5572a90848280eab63911e8bf22277c07ab342fad/pcappy-0.3.tar.gz
Collecting pyOpenSSL==16.2.0 (from -r /lisp/pip-requirements.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/ac/93/b4cd538d31adacd07f83013860db6b88d78755af1f3fefe68ec22d397e7b/pyOpenSSL-16.2.0-py2.py3-none-any.whl (43kB)
Collecting pycrypto==2.6.1 (from -r /lisp/pip-requirements.txt (line 7))
  Downloading https://files.pythonhosted.org/packages/60/db/645aa9af249f059cc3a368b118de33889219e0362141e75d4eaf6f80f163/pycrypto-2.6.1.tar.gz (446kB)
Collecting requests==2.0.1 (from -r /lisp/pip-requirements.txt (line 9))
  Downloading https://files.pythonhosted.org/packages/8f/ea/140f18072bbcd81885a9490abb171792fd2961fd7f366be58396f4c6d634/requests-2.0.1-py2.py3-none-any.whl (439kB)
Collecting curve25519-donna==1.3 (from -r /lisp/pip-requirements.txt (line 10))
  Downloading https://files.pythonhosted.org/packages/01/05/1ab1cc54c2b1e933721b8e65fedc01098e6b8ffdccedbc4a682d4e0db8c1/curve25519-donna-1.3.tar.gz
Collecting geopy==1.11.0 (from -r /lisp/pip-requirements.txt (line 11))
  Downloading https://files.pythonhosted.org/packages/e0/fd/d1b3225959939907a1a87c3623a021742b3b9ef5db35c15cb916e18de42c/geopy-1.11.0-py2.py3-none-any.whl (66kB)
Collecting python-pytun==0.2 (from -r /lisp/pip-requirements.txt (line 12))
  Downloading https://files.pythonhosted.org/packages/3a/c6/6792ce3b89260d3b30eef6cd8b36122064a301c971264bf04c2f9991cdd1/python-pytun-0.2.tar.gz
Collecting ecdsa==0.13 (from -r /lisp/pip-requirements.txt (line 13))
  Downloading https://files.pythonhosted.org/packages/63/f4/73669d51825516ce8c43b816c0a6b64cd6eb71d08b99820c00792cb42222/ecdsa-0.13-py2.py3-none-any.whl (86kB)
Collecting pycryptodome==3.5.1 (from -r /lisp/pip-requirements.txt (line 14))
  Downloading https://files.pythonhosted.org/packages/86/d1/f1c6b1e4b2dd5e3f2f56f6f3c74ac9893252dbef9ac0e55c8b4538e56db0/pycryptodome-3.5.1.tar.gz (6.7MB)
Collecting six (from CherryPy==8.2.0->-r /lisp/pip-requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/67/4b/141a581104b1f6397bfa78ac9d43d8ad29a7ca43ea90a2d863fe3056e86a/six-1.11.0-py2.py3-none-any.whl
Collecting cryptography>=1.3.4 (from pyOpenSSL==16.2.0->-r /lisp/pip-requirements.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/ec/b2/faa78c1ab928d2b2c634c8b41ff1181f0abdd9adf9193211bd606ffa57e2/cryptography-2.2.2.tar.gz (443kB)
Collecting idna>=2.1 (from cryptography>=1.3.4->pyOpenSSL==16.2.0->-r /lisp/pip-requirements.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/4b/2a/0276479a4b3caeb8a8c1af2f8e4355746a97fab05a372e4a2c6a6b876165/idna-2.7-py2.py3-none-any.whl (58kB)
Collecting asn1crypto>=0.21.0 (from cryptography>=1.3.4->pyOpenSSL==16.2.0->-r /lisp/pip-requirements.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/ea/cd/35485615f45f30a510576f1a56d1e0a7ad7bd8ab5ed7cdc600ef7cd06222/asn1crypto-0.24.0-py2.py3-none-any.whl (101kB)
Collecting cffi>=1.7 (from cryptography>=1.3.4->pyOpenSSL==16.2.0->-r /lisp/pip-requirements.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/e7/a7/4cd50e57cc6f436f1cc3a7e8fa700ff9b8b4d471620629074913e3735fb2/cffi-1.11.5.tar.gz (438kB)
Collecting enum34 (from cryptography>=1.3.4->pyOpenSSL==16.2.0->-r /lisp/pip-requirements.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/c5/db/e56e6b4bbac7c4a06de1c50de6fe1ef3810018ae11732a50f15f62c7d050/enum34-1.1.6-py2-none-any.whl
Collecting ipaddress (from cryptography>=1.3.4->pyOpenSSL==16.2.0->-r /lisp/pip-requirements.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/fc/d0/7fc3a811e011d4b388be48a0e381db8d990042df54aa4ef4599a31d39853/ipaddress-1.0.22-py2.py3-none-any.whl
Collecting pycparser (from cffi>=1.7->cryptography>=1.3.4->pyOpenSSL==16.2.0->-r /lisp/pip-requirements.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/8c/2d/aad7f16146f4197a11f8e91fb81df177adcc2073d36a17b1491fd09df6ed/pycparser-2.18.tar.gz (245kB)
Installing collected packages: six, CherryPy, bottle, netifaces, pcappy, idna, asn1crypto, pycparser, cffi, enum34, ipaddress, cryptography, pyOpenSSL, pycrypto, requests, curve25519-donna, geopy, python-pytun, ecdsa, pycryptodome
  Running setup.py install for CherryPy: started
    Running setup.py install for CherryPy: finished with status 'done'
  Running setup.py install for netifaces: started
    Running setup.py install for netifaces: finished with status 'done'
  Running setup.py install for pcappy: started
    Running setup.py install for pcappy: finished with status 'done'
  Running setup.py install for pycparser: started
    Running setup.py install for pycparser: finished with status 'done'
  Running setup.py install for cffi: started
    Running setup.py install for cffi: finished with status 'done'
  Running setup.py install for cryptography: started
    Running setup.py install for cryptography: finished with status 'done'
  Running setup.py install for pycrypto: started
    Running setup.py install for pycrypto: finished with status 'done'
  Running setup.py install for curve25519-donna: started
    Running setup.py install for curve25519-donna: finished with status 'done'
  Running setup.py install for python-pytun: started
    Running setup.py install for python-pytun: finished with status 'done'
  Running setup.py install for pycryptodome: started
    Running setup.py install for pycryptodome: finished with status 'done'
Successfully installed CherryPy-8.2.0 asn1crypto-0.24.0 bottle-0.11.6 cffi-1.11.5 cryptography-2.2.2 curve25519-donna-1.3 ecdsa-0.13 enum34-1.1.6 geopy-1.11.0 idna-2.7 ipaddress-1.0.22 netifaces-0.10.0 pcappy-0.3 pyOpenSSL-16.2.0 pycparser-2.18 pycrypto-2.6.1 pycryptodome-3.5.1 python-pytun-0.2 requests-2.0.1 six-1.11.0
 ---> c328f12c6e71
Removing intermediate container db291f670b19
Step 15/20 : RUN echo 'PS1="`hostname | cut -d . -f 0` > "' >> /root/.profile
 ---> Running in c06605ba38da
 ---> 9392fac7b17b
Removing intermediate container c06605ba38da
Step 16/20 : COPY --from=go-build /go/bin/dataplane /lisp/lisp-ztr
 ---> e41685d3ca29
Step 17/20 : EXPOSE 8080
 ---> Running in c04b5e7cddcd
 ---> 133216c4c90b
Removing intermediate container c04b5e7cddcd
Step 18/20 : WORKDIR /lisp
 ---> 9ee1d68f6218
Removing intermediate container fc3a2bd60463
Step 19/20 : CMD ./CONFIG-SVC ; ./RL ; sleep 5 ; tail -f ./logs/*
 ---> Running in 87139586197a
 ---> d2613c6ed0ab
Removing intermediate container 87139586197a
Step 20/20 : LABEL org.mobyproject.linuxkit.revision 'unknown' org.mobyproject.linuxkit.version 'unknown' org.opencontainers.image.revision 'a0a691d8d755b0e652febffff3e2dabff67fb693' org.opencontainers.image.source 'https://github.com/linuxkit/linuxkit'
 ---> Running in b2eefb236636
 ---> 34e6510cd13b
Removing intermediate container b2eefb236636
Successfully built 34e6510cd13b
Successfully tagged zededa/lisp:0d02968ede183f2ba064e5736260ef9f6dbb8f20-arm64
Pushing zededa/lisp:0d02968ede183f2ba064e5736260ef9f6dbb8f20-arm64
The push refers to a repository [docker.io/zededa/lisp]
c7bbcbeb7f8d: Preparing
8cf69c9b9abb: Preparing
a29d354fae94: Preparing
c71d46f2f690: Preparing
042591577c16: Preparing
d07a0209af0b: Preparing
f40ac4a0be73: Preparing
b2de77c3ccdf: Preparing
7559e6e3855b: Preparing
7678a2257549: Preparing
199db0687ace: Preparing
b2de77c3ccdf: Waiting
7559e6e3855b: Waiting
7678a2257549: Waiting
199db0687ace: Waiting
f40ac4a0be73: Waiting
d07a0209af0b: Waiting
042591577c16: Pushed
8cf69c9b9abb: Pushed
c7bbcbeb7f8d: Pushed
c71d46f2f690: Pushed
d07a0209af0b: Pushed
b2de77c3ccdf: Pushed
7678a2257549: Layer already exists
199db0687ace: Layer already exists
f40ac4a0be73: Pushed
a29d354fae94: Pushed
7559e6e3855b: Pushed
0d02968ede183f2ba064e5736260ef9f6dbb8f20-arm64: digest: sha256:3780a09d56aa624255cf8e06a586a2275323c7a43a6c6b7e77335f1f1cac2e16 size: 2621
Pushing zededa/lisp:0d02968ede183f2ba064e5736260ef9f6dbb8f20-arm64 to manifest zededa/lisp:0d02968ede183f2ba064e5736260ef9f6dbb8f20
time="2018-06-26T08:04:33+02:00" level=warning msg="Couldn't find or access image reference \"zededa/lisp:0d02968ede183f2ba064e5736260ef9f6dbb8f20-s390x\". Skipping image."
Digest: sha256:9d81ddc5aeebdd4339323049390b6db1ef6949e3b463bed9486f397af1c4ae15 743
Not signing zededa/lisp:0d02968ede183f2ba064e5736260ef9f6dbb8f20
Build and push complete, not releasing, all done.
Building and pushing "zededa/lisp:latest"
Sending build context to Docker daemon   8.47MB
Step 1/20 : FROM golang:1.9.1-alpine AS go-build
 ---> cc52d0ad4cce
Step 2/20 : RUN apk update
 ---> Using cache
 ---> b0202011f9d2
Step 3/20 : RUN apk add --no-cache git gcc linux-headers libc-dev libpcap-dev
 ---> Using cache
 ---> e1e8ea822b21
Step 4/20 : ADD . /go/src/github.com/zededa/lisp
 ---> Using cache
 ---> d1fa0f373246
Step 5/20 : RUN go install github.com/zededa/lisp/cmd/...
 ---> Using cache
 ---> 69dc5c90815e
Step 6/20 : FROM alpine:3.6
 ---> a9277cb286bb
Step 7/20 : RUN apk add --no-cache curl gcc linux-headers libc-dev python python-dev libffi-dev openssl-dev libpcap-dev iproute2 tcpdump ethtool ip6tables
 ---> Using cache
 ---> 22c4198640c2
Step 8/20 : RUN mkdir /lisp
 ---> Using cache
 ---> a735a97af9aa
Step 9/20 : ARG LISP_URL=https://www.dropbox.com/s/ogfu5gaw550rlkq/zededa.tgz
 ---> Using cache
 ---> e7b21c08194f
Step 10/20 : RUN cd /lisp ; curl --insecure -L $LISP_URL | gzip -dc | tar -xf -
 ---> Using cache
 ---> cd58f592636e
Step 11/20 : ADD scripts/sudo /usr/bin/sudo
 ---> Using cache
 ---> a1f724579c22
Step 12/20 : ADD conf scripts/RESTART-LISP scripts/RUN-LISP.rtr1 scripts/RUN-LISP scripts/STOP-LISP scripts/CONFIG-SVC scripts/RL scripts/pslisp scripts/log-packets scripts/ping-mesh.py /lisp/
 ---> Using cache
 ---> 53fc18271b62
Step 13/20 : RUN python /lisp/get-pip.py
 ---> Using cache
 ---> 32045064af7f
Step 14/20 : RUN pip install -r /lisp/pip-requirements.txt
 ---> Using cache
 ---> c328f12c6e71
Step 15/20 : RUN echo 'PS1="`hostname | cut -d . -f 0` > "' >> /root/.profile
 ---> Using cache
 ---> 9392fac7b17b
Step 16/20 : COPY --from=go-build /go/bin/dataplane /lisp/lisp-ztr
 ---> Using cache
 ---> e41685d3ca29
Step 17/20 : EXPOSE 8080
 ---> Using cache
 ---> 133216c4c90b
Step 18/20 : WORKDIR /lisp
 ---> Using cache
 ---> 9ee1d68f6218
Step 19/20 : CMD ./CONFIG-SVC ; ./RL ; sleep 5 ; tail -f ./logs/*
 ---> Using cache
 ---> d2613c6ed0ab
Step 20/20 : LABEL org.mobyproject.linuxkit.revision 'unknown' org.mobyproject.linuxkit.version 'unknown' org.opencontainers.image.revision 'a0a691d8d755b0e652febffff3e2dabff67fb693' org.opencontainers.image.source 'https://github.com/linuxkit/linuxkit'
 ---> Using cache
 ---> 34e6510cd13b
Successfully built 34e6510cd13b
Successfully tagged zededa/lisp:latest-arm64
Pushing zededa/lisp:latest-arm64
The push refers to a repository [docker.io/zededa/lisp]
c7bbcbeb7f8d: Preparing
8cf69c9b9abb: Preparing
a29d354fae94: Preparing
c71d46f2f690: Preparing
042591577c16: Preparing
d07a0209af0b: Preparing
f40ac4a0be73: Preparing
b2de77c3ccdf: Preparing
7559e6e3855b: Preparing
7678a2257549: Preparing
199db0687ace: Preparing
b2de77c3ccdf: Waiting
7559e6e3855b: Waiting
199db0687ace: Waiting
7678a2257549: Waiting
d07a0209af0b: Waiting
f40ac4a0be73: Waiting
a29d354fae94: Layer already exists
c71d46f2f690: Layer already exists
8cf69c9b9abb: Layer already exists
c7bbcbeb7f8d: Layer already exists
042591577c16: Layer already exists
d07a0209af0b: Layer already exists
b2de77c3ccdf: Layer already exists
7678a2257549: Layer already exists
f40ac4a0be73: Layer already exists
7559e6e3855b: Layer already exists
199db0687ace: Layer already exists
latest-arm64: digest: sha256:3780a09d56aa624255cf8e06a586a2275323c7a43a6c6b7e77335f1f1cac2e16 size: 2621
Pushing zededa/lisp:latest-arm64 to manifest zededa/lisp:latest
time="2018-06-26T08:04:45+02:00" level=warning msg="Couldn't find or access image reference \"zededa/lisp:latest-s390x\". Skipping image."
Digest: sha256:5d1605904eccd43f16f6038c6eef5d611288ed3944093e59af49a6d752446d69 743
Not signing zededa/lisp:latest
Build and push complete, not releasing, all done.
Building and pushing "zededa/ztools:d1ffa192d9a225e3c9dc77d5c1fbf5021763d020"
d1ffa192d9a225e3c9dc77d5c1fbf5021763d020: Pulling from zededa/ztools
no matching manifest for linux/arm64 in the manifest list entries
No image pulled, continuing with build
Sending build context to Docker daemon  22.17MB
Step 1/33 : FROM golang:1.9.1-alpine AS build
 ---> cc52d0ad4cce
Step 2/33 : RUN apk update
 ---> Using cache
 ---> b0202011f9d2
Step 3/33 : RUN apk add --no-cache git gcc linux-headers libc-dev util-linux
 ---> Using cache
 ---> 648257fc5dd9
Step 4/33 : ADD ./ /go/src/github.com/zededa/go-provision/
 ---> 823e43c94ed3
Step 5/33 : ADD etc /config
 ---> 9ea71215eb8a
Step 6/33 : ADD scripts/device-steps.sh scripts/find-uplink.sh scripts/generate-device.sh scripts/generate-self-signed.sh scripts/handlezedserverconfig.sh /opt/zededa/bin/
 ---> 68e865e94abc
Step 7/33 : ADD examples /opt/zededa/examples
 ---> 967325ac108f
Step 8/33 : ADD AssignableAdapters /var/tmp/zededa/AssignableAdapters
 ---> 235c431b9512
Step 9/33 : ADD DeviceNetworkConfig /var/tmp/zededa/DeviceNetworkConfig
 ---> 8c4b2a18d5ae
Step 10/33 : ADD lisp.config.base /var/tmp/zededa/lisp.config.base
 ---> 8bdb65da6d4a
Step 11/33 : RUN (cd ./src/github.com/zededa/go-provision/; scripts/getversion.sh >/opt/zededa/bin/versioninfo)
 ---> Running in df15b125cd81
 ---> de93d2d4a08e
Removing intermediate container df15b125cd81
Step 12/33 : RUN cp /opt/zededa/bin/versioninfo /opt/zededa/bin/versioninfo.1
 ---> Running in c50365b027ba
 ---> c131b2393186
Removing intermediate container c50365b027ba
Step 13/33 : RUN echo Building: `cat /opt/zededa/bin/versioninfo`
 ---> Running in 12a0629f1751
Building: 20180314-test-e2933fa8-2018-06-26.06.05
 ---> d57a5b4ef6d8
Removing intermediate container 12a0629f1751
Step 14/33 : RUN go install github.com/zededa/go-provision/zedbox/...
 ---> Running in 6446d97ac354
 ---> c7893fda2265
Removing intermediate container 6446d97ac354
Step 15/33 : RUN cd /opt/zededa/bin ; ln -s /go/bin/* .
 ---> Running in 5a53294cbe21
 ---> b94617eba357
Removing intermediate container 5a53294cbe21
Step 16/33 : RUN cd /opt/zededa/bin ; ln -s zedbox client; ln -s zedbox domainmgr; ln -s zedbox downloader; ln -s zedbox eidregister; ln -s zedbox hardwaremodel; ln -s zedbox identitymgr; ln -s zedbox ledmanager; ln -s zedbox logmanager; ln -s zedbox verifier; ln -s zedbox zedagent; ln -s zedbox zedmanager; ln -s zedbox zedrouter
 ---> Running in b0d402170f6b
 ---> a7a6ec061879
Removing intermediate container b0d402170f6b
Step 17/33 : FROM zededa/lisp:latest AS lisp
 ---> 8c611457d2fd
Step 18/33 : FROM scratch
 ---> 
Step 19/33 : COPY --from=build /opt/zededa/bin /opt/zededa/bin
 ---> 035f6076b0f1
Step 20/33 : COPY --from=build /opt/zededa/examples /opt/zededa/examples
 ---> 7111c93d4ce1
Step 21/33 : COPY --from=build /var/tmp/zededa/AssignableAdapters /var/tmp/zededa/AssignableAdapters
 ---> 4f8739731e0d
Step 22/33 : COPY --from=build /var/tmp/zededa/DeviceNetworkConfig /var/tmp/zededa/DeviceNetworkConfig
 ---> 76c193369407
Step 23/33 : COPY --from=build /var/tmp/zededa/lisp.config.base /var/tmp/zededa/lisp.config.base
 ---> 43946c26407c
Step 24/33 : COPY --from=build /config /opt/zededa/examples/config
 ---> 61918414e712
Step 25/33 : COPY --from=build /go/bin/* /opt/zededa/bin/
 ---> e38899d7b277
Step 26/33 : COPY --from=lisp /lisp/lisp-ztr /opt/zededa/bin/
COPY failed: stat /var/lib/docker/btrfs/subvolumes/29ab838b6ce29a6bd949066528676051c69261cfde895d1943277cdc4153f871/lisp/lisp-ztr: no such file or directory
exit status 1
Building and pushing "zededa/ztools:latest"
Sending build context to Docker daemon  22.17MB
Step 1/33 : FROM golang:1.9.1-alpine AS build
 ---> cc52d0ad4cce
Step 2/33 : RUN apk update
 ---> Using cache
 ---> b0202011f9d2
Step 3/33 : RUN apk add --no-cache git gcc linux-headers libc-dev util-linux
 ---> Using cache
 ---> 648257fc5dd9
Step 4/33 : ADD ./ /go/src/github.com/zededa/go-provision/
 ---> Using cache
 ---> 823e43c94ed3
Step 5/33 : ADD etc /config
 ---> Using cache
 ---> 9ea71215eb8a
Step 6/33 : ADD scripts/device-steps.sh scripts/find-uplink.sh scripts/generate-device.sh scripts/generate-self-signed.sh scripts/handlezedserverconfig.sh /opt/zededa/bin/
 ---> Using cache
 ---> 68e865e94abc
Step 7/33 : ADD examples /opt/zededa/examples
 ---> Using cache
 ---> 967325ac108f
Step 8/33 : ADD AssignableAdapters /var/tmp/zededa/AssignableAdapters
 ---> Using cache
 ---> 235c431b9512
Step 9/33 : ADD DeviceNetworkConfig /var/tmp/zededa/DeviceNetworkConfig
 ---> Using cache
 ---> 8c4b2a18d5ae
Step 10/33 : ADD lisp.config.base /var/tmp/zededa/lisp.config.base
 ---> Using cache
 ---> 8bdb65da6d4a
Step 11/33 : RUN (cd ./src/github.com/zededa/go-provision/; scripts/getversion.sh >/opt/zededa/bin/versioninfo)
 ---> Using cache
 ---> de93d2d4a08e
Step 12/33 : RUN cp /opt/zededa/bin/versioninfo /opt/zededa/bin/versioninfo.1
 ---> Using cache
 ---> c131b2393186
Step 13/33 : RUN echo Building: `cat /opt/zededa/bin/versioninfo`
 ---> Using cache
 ---> d57a5b4ef6d8
Step 14/33 : RUN go install github.com/zededa/go-provision/zedbox/...
 ---> Using cache
 ---> c7893fda2265
Step 15/33 : RUN cd /opt/zededa/bin ; ln -s /go/bin/* .
 ---> Using cache
 ---> b94617eba357
Step 16/33 : RUN cd /opt/zededa/bin ; ln -s zedbox client; ln -s zedbox domainmgr; ln -s zedbox downloader; ln -s zedbox eidregister; ln -s zedbox hardwaremodel; ln -s zedbox identitymgr; ln -s zedbox ledmanager; ln -s zedbox logmanager; ln -s zedbox verifier; ln -s zedbox zedagent; ln -s zedbox zedmanager; ln -s zedbox zedrouter
 ---> Using cache
 ---> a7a6ec061879
Step 17/33 : FROM zededa/lisp:latest AS lisp
 ---> 8c611457d2fd
Step 18/33 : FROM scratch
 ---> 
Step 19/33 : COPY --from=build /opt/zededa/bin /opt/zededa/bin
 ---> Using cache
 ---> 035f6076b0f1
Step 20/33 : COPY --from=build /opt/zededa/examples /opt/zededa/examples
 ---> Using cache
 ---> 7111c93d4ce1
Step 21/33 : COPY --from=build /var/tmp/zededa/AssignableAdapters /var/tmp/zededa/AssignableAdapters
 ---> Using cache
 ---> 4f8739731e0d
Step 22/33 : COPY --from=build /var/tmp/zededa/DeviceNetworkConfig /var/tmp/zededa/DeviceNetworkConfig
 ---> Using cache
 ---> 76c193369407
Step 23/33 : COPY --from=build /var/tmp/zededa/lisp.config.base /var/tmp/zededa/lisp.config.base
 ---> Using cache
 ---> 43946c26407c
Step 24/33 : COPY --from=build /config /opt/zededa/examples/config
 ---> Using cache
 ---> 61918414e712
Step 25/33 : COPY --from=build /go/bin/* /opt/zededa/bin/
 ---> Using cache
 ---> e38899d7b277
Step 26/33 : COPY --from=lisp /lisp/lisp-ztr /opt/zededa/bin/
COPY failed: stat /var/lib/docker/btrfs/subvolumes/8370ba4fc19a823026051ed79c4c7da48b308db7e89ebcfdf89eeffa54b7c33d/lisp/lisp-ztr: no such file or directory
exit status 1
make: Entering directory '/home/zededa-ci/src/zenbuild/pkg'
(cd ..; ./parse-pkgs.sh pkg/qrexec-lib/Dockerfile.in > pkg/qrexec-lib/Dockerfile)
(cd ..; ./parse-pkgs.sh pkg/qrexec-dom0/Dockerfile.in > pkg/qrexec-dom0/Dockerfile)
(cd ..; ./parse-pkgs.sh pkg/zedctr/Dockerfile.in > pkg/zedctr/Dockerfile)
(cd ..; ./parse-pkgs.sh pkg/mkconf/Dockerfile.in > pkg/mkconf/Dockerfile)
Building and pushing "zededa/grub:35eb3c470422d1bced11f3457ea8ff432d9f0590"
35eb3c470422d1bced11f3457ea8ff432d9f0590: Pulling from zededa/grub
Digest: sha256:6cd267b4fdc5cd2a9b7ff7a98087051d26b58d6d703e06c9901e12c60505cf68
Status: Image is up to date for zededa/grub:35eb3c470422d1bced11f3457ea8ff432d9f0590
Building and pushing "zededa/xen:07f48fb845ebcbb4327b6493875a846d0e4ffd3b"
07f48fb845ebcbb4327b6493875a846d0e4ffd3b: Pulling from zededa/xen
Digest: sha256:9495b7e0bf6ac771b9581694fa517c79c467377bb3834685f02f3bdf548190be
Status: Image is up to date for zededa/xen:07f48fb845ebcbb4327b6493875a846d0e4ffd3b
Building and pushing "zededa/kernel:e8accf1611206572eef0d8e24fa325e6488bdc7b"
e8accf1611206572eef0d8e24fa325e6488bdc7b: Pulling from zededa/kernel
Digest: sha256:5852347d838a993013f115d2d3ddd01f6890062fbf49dab9138c48b2b4f97e5c
Status: Image is up to date for zededa/kernel:e8accf1611206572eef0d8e24fa325e6488bdc7b
Building and pushing "zededa/xen-tools:ccc3ab24a38b4680bdbe4c204cc628026e7584a7"
ccc3ab24a38b4680bdbe4c204cc628026e7584a7: Pulling from zededa/xen-tools
Digest: sha256:42953f7af8477117cfd4732167d1ff1ffb7ac5f47051143b9d2c200d6c2dc98b
Status: Image is up to date for zededa/xen-tools:ccc3ab24a38b4680bdbe4c204cc628026e7584a7
Building and pushing "zededa/dnsmasq:e2de7e6a478850d931724f951f877cd507d77358"
e2de7e6a478850d931724f951f877cd507d77358: Pulling from zededa/dnsmasq
Digest: sha256:4837b9913437c3311f5eaf4e6288f193a41bf475a24f0e3ed96e7e0ebf7f14af
Status: Image is up to date for zededa/dnsmasq:e2de7e6a478850d931724f951f877cd507d77358
Building and pushing "zededa/strongswan:3957eaaa64beb65e946494bab989e861f34811cb"
3957eaaa64beb65e946494bab989e861f34811cb: Pulling from zededa/strongswan
Digest: sha256:b84b2fe57990277c15d4084b1c1862bd1f554384d3c6787520be05e2022e6841
Status: Image is up to date for zededa/strongswan:3957eaaa64beb65e946494bab989e861f34811cb
Building and pushing "zededa/gpt-tools:f0be39997551891e81c6edc38acc20f61077287b"
f0be39997551891e81c6edc38acc20f61077287b: Pulling from zededa/gpt-tools
Digest: sha256:8efde3a21d832294ec111dd5e8b156e016e1843b7331e31fd34aaec7e5cf7e0a
Status: Image is up to date for zededa/gpt-tools:f0be39997551891e81c6edc38acc20f61077287b
Building and pushing "zededa/dom0-ztools:c6d8f2123c748379add5d3dbbac23e3630131760"
c6d8f2123c748379add5d3dbbac23e3630131760: Pulling from zededa/dom0-ztools
Digest: sha256:20682cf32f7d42f72fc3fb0bec8bbb8b28b12ef24ba8628eab587d6710d42ef5
Status: Image is up to date for zededa/dom0-ztools:c6d8f2123c748379add5d3dbbac23e3630131760
Building and pushing "zededa/qrexec-lib:2e0df0df95f86df6953d7d2e7729213b77fd7206"
2e0df0df95f86df6953d7d2e7729213b77fd7206: Pulling from zededa/qrexec-lib
Digest: sha256:c67be2ae74df9df68c42f87e8fa6f5c09841517fa5c9e2685ed7893857163c2c
Status: Image is up to date for zededa/qrexec-lib:2e0df0df95f86df6953d7d2e7729213b77fd7206
Building and pushing "zededa/qrexec-dom0:2c3cf9b135409690eaa86092c41f7c800d398468"
2c3cf9b135409690eaa86092c41f7c800d398468: Pulling from zededa/qrexec-dom0
Digest: sha256:4789060748d9ca3f3e33a31cb089aec797e3427b183fd4eaf1910896a01ba11d
Status: Image is up to date for zededa/qrexec-dom0:2c3cf9b135409690eaa86092c41f7c800d398468
Building and pushing "zededa/wwan:addf826bbc6885c0a28cd8f018f69cadaca4674f"
addf826bbc6885c0a28cd8f018f69cadaca4674f: Pulling from zededa/wwan
Digest: sha256:0dcf1fdff6cb8a4df7da25a1d0c80ce758f469f80e8dd59f6cb0f801fb676064
Status: Image is up to date for zededa/wwan:addf826bbc6885c0a28cd8f018f69cadaca4674f
Building and pushing "zededa/wlan:cfd366430df0620df11b2af7f3d9d63d617a5903"
cfd366430df0620df11b2af7f3d9d63d617a5903: Pulling from zededa/wlan
Digest: sha256:641dbf64cb41e3bf9ef740d4125300f2c96eb649aba239f23595344fdc839fac
Status: Image is up to date for zededa/wlan:cfd366430df0620df11b2af7f3d9d63d617a5903
Building and pushing "zededa/watchdog:3e77cbcffbf4f71309bab82500039967bca0d189"
3e77cbcffbf4f71309bab82500039967bca0d189: Pulling from zededa/watchdog
Digest: sha256:4607e395788c445aebd51a4cd6127de828029f565d3e1d65b56668ff66a60d45
Status: Image is up to date for zededa/watchdog:3e77cbcffbf4f71309bab82500039967bca0d189
Building and pushing "zededa/device-trees:1bca882c64827de08bba9aa7713441b2b4d7ca8d"
1bca882c64827de08bba9aa7713441b2b4d7ca8d: Pulling from zededa/device-trees
Digest: sha256:633a8d6650050e3d128b3d44e70c93adeb0dddfab1261269eabe64eaf2173d81
Status: Image is up to date for zededa/device-trees:1bca882c64827de08bba9aa7713441b2b4d7ca8d
Building and pushing "zededa/zedctr:d4953285c6c5ea0dce2e64bf840e29eee1ae2615"
d4953285c6c5ea0dce2e64bf840e29eee1ae2615: Pulling from zededa/zedctr
Digest: sha256:02001e9e153211fc98e6b5f26cf17f15577318f015f87c1a1736b0191ff6c085
Status: Downloaded newer image for zededa/zedctr:d4953285c6c5ea0dce2e64bf840e29eee1ae2615
Building and pushing "zededa/conf:4992a3a63c95b0e446c681a0deaca7a071aba709"
4992a3a63c95b0e446c681a0deaca7a071aba709: Pulling from zededa/conf
Digest: sha256:c1ee0f9ac20c9f49c70e16f892fd37258bf2c7567ad2de976dd5f67a982b324a
Status: Image is up to date for zededa/conf:4992a3a63c95b0e446c681a0deaca7a071aba709
Building and pushing "zededa/mkrootfs-ext4:5f77cd6a2b87a3a9927593763da1941dbed1ce80"
5f77cd6a2b87a3a9927593763da1941dbed1ce80: Pulling from zededa/mkrootfs-ext4
Digest: sha256:dde944fb6507c3a230ac5d15d0bc11db194286e276ac50913515a69e2e2c933d
Status: Image is up to date for zededa/mkrootfs-ext4:5f77cd6a2b87a3a9927593763da1941dbed1ce80
Building and pushing "zededa/mkrootfs-squash:b47d705603f5f0d3765b03cf583e1a7fd287f212"
b47d705603f5f0d3765b03cf583e1a7fd287f212: Pulling from zededa/mkrootfs-squash
Digest: sha256:c983454763003736ee372074ab84f80745aa40ae18245f250985f2c593d4a707
Status: Image is up to date for zededa/mkrootfs-squash:b47d705603f5f0d3765b03cf583e1a7fd287f212
Building and pushing "zededa/mkflash:362411f3b96bd6054f97237f5a7382912aebb349"
362411f3b96bd6054f97237f5a7382912aebb349: Pulling from zededa/mkflash
Digest: sha256:b03191ae8badd063541f2eea5d62a84b3a5f605d1533091f45ec752bd013108d
Status: Image is up to date for zededa/mkflash:362411f3b96bd6054f97237f5a7382912aebb349
Building and pushing "zededa/mkimage-iso-efi:49a6ff8320ce088460c8acb6f36bc15b15d800e9"
49a6ff8320ce088460c8acb6f36bc15b15d800e9: Pulling from zededa/mkimage-iso-efi
Digest: sha256:30c22ebf5ce49c8b9197e00936143ba511aa27b5fde11df0dcbd1806cb98ac35
Status: Image is up to date for zededa/mkimage-iso-efi:49a6ff8320ce088460c8acb6f36bc15b15d800e9
make: Leaving directory '/home/zededa-ci/src/zenbuild/pkg'
make: Entering directory '/home/zededa-ci/src/zenbuild/pkg'
(cd ..; ./parse-pkgs.sh pkg/zedctr//Dockerfile.in > pkg/zedctr//Dockerfile)
Building and pushing "zededa/zedctr:d4953285c6c5ea0dce2e64bf840e29eee1ae2615"
Sending build context to Docker daemon  16.38kB
Step 1/20 : FROM zededa/ztools:latest as ztools
 ---> 6341cd92336a
Step 2/20 : FROM zededa/xen-tools:ccc3ab24a38b4680bdbe4c204cc628026e7584a7-arm64 as xen-tools
 ---> 9338796f340c
Step 3/20 : FROM zededa/dnsmasq:e2de7e6a478850d931724f951f877cd507d77358-arm64 as dnsmasq
 ---> 1a0a9313ef5f
Step 4/20 : FROM zededa/strongswan:3957eaaa64beb65e946494bab989e861f34811cb-arm64 as strongswan
 ---> c9bc0d3f0642
Step 5/20 : FROM zededa/gpt-tools:f0be39997551891e81c6edc38acc20f61077287b-arm64 as gpttools
 ---> bb17a51a6442
Step 6/20 : FROM zededa/watchdog:3e77cbcffbf4f71309bab82500039967bca0d189-arm64 as watchdog
 ---> 57e0cb5696a7
Step 7/20 : FROM alpine:3.6
 ---> a9277cb286bb
Step 8/20 : RUN apk add --no-cache     yajl xz bash openssl iptables ip6tables iproute2     apk-cron coreutils dmidecode sudo libbz2 libuuid ipset     libpcap libaio logrotate pixman glib curl radvd perl ethtool     openssh-server util-linux e2fsprogs libcrypto1.0
 ---> Running in e6acd0b7138d
fetch http://dl-cdn.alpinelinux.org/alpine/v3.6/main/aarch64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.6/community/aarch64/APKINDEX.tar.gz
(1/53) Installing apk-cron (1.0-r0)
(2/53) Installing ncurses-terminfo-base (6.0_p20171125-r0)
(3/53) Installing ncurses-terminfo (6.0_p20171125-r0)
(4/53) Installing ncurses-libs (6.0_p20171125-r0)
(5/53) Installing readline (6.3.008-r5)
(6/53) Installing bash (4.3.48-r1)
Executing bash-4.3.48-r1.post-install
(7/53) Installing libattr (2.4.47-r6)
(8/53) Installing libacl (2.2.52-r3)
(9/53) Installing coreutils (8.27-r0)
(10/53) Installing ca-certificates (20161130-r2)
(11/53) Installing libssh2 (1.8.0-r1)
(12/53) Installing libcurl (7.60.0-r1)
(13/53) Installing curl (7.60.0-r1)
(14/53) Installing dmidecode (3.0-r0)
(15/53) Installing libuuid (2.28.2-r2)
(16/53) Installing libblkid (2.28.2-r2)
(17/53) Installing libcom_err (1.43.4-r0)
(18/53) Installing e2fsprogs-libs (1.43.4-r0)
(19/53) Installing e2fsprogs (1.43.4-r0)
(20/53) Installing ethtool (4.10-r0)
(21/53) Installing libffi (3.2.1-r3)
(22/53) Installing libintl (0.19.8.1-r1)
(23/53) Installing libmount (2.28.2-r2)
(24/53) Installing pcre (8.41-r0)
(25/53) Installing glib (2.52.1-r0)
(26/53) Installing libmnl (1.0.4-r0)
(27/53) Installing libnftnl-libs (1.0.7-r0)
(28/53) Installing iptables (1.6.1-r0)
(29/53) Installing ip6tables (1.6.1-r0)
(30/53) Installing libelf (0.8.13-r2)
(31/53) Installing iproute2 (4.10.0-r1)
Executing iproute2-4.10.0-r1.post-install
(32/53) Installing ipset (6.32-r3)
(33/53) Installing libaio (0.3.110-r0)
(34/53) Installing libbz2 (1.0.6-r5)
(35/53) Installing libcrypto1.0 (1.0.2o-r0)
(36/53) Installing libpcap (1.8.1-r0)
(37/53) Installing popt (1.16-r6)
(38/53) Installing logrotate (3.12.2-r0)
(39/53) Installing openssh-keygen (7.5_p1-r2)
(40/53) Installing openssh-server (7.5_p1-r2)
(41/53) Installing libssl1.0 (1.0.2o-r0)
(42/53) Installing openssl (1.0.2o-r0)
(43/53) Installing perl (5.24.4-r0)
(44/53) Installing pixman (0.34.0-r0)
(45/53) Installing radvd (2.15-r0)
Executing radvd-2.15-r0.pre-install
(46/53) Installing sudo (1.8.19_p2-r0)
(47/53) Installing libsmartcols (2.28.2-r2)
(48/53) Installing findmnt (2.28.2-r2)
(49/53) Installing libfdisk (2.28.2-r2)
(50/53) Installing util-linux (2.28.2-r2)
(51/53) Installing xz-libs (5.2.3-r0)
(52/53) Installing xz (5.2.3-r0)
(53/53) Installing yajl (2.1.0-r0)
Executing busybox-1.26.2-r5.trigger
Executing ca-certificates-20161130-r2.trigger
Executing glib-2.52.1-r0.trigger
OK: 73 MiB in 64 packages
 ---> c82215467887
Removing intermediate container e6acd0b7138d
Step 9/20 : RUN [ `uname -m` = "aarch64" ] && apk add --no-cache libfdt || :
 ---> Running in dabc5cf61cca
fetch http://dl-cdn.alpinelinux.org/alpine/v3.6/main/aarch64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.6/community/aarch64/APKINDEX.tar.gz
(1/1) Installing libfdt (1.4.4-r0)
OK: 73 MiB in 65 packages
 ---> 6f55b4b0396d
Removing intermediate container dabc5cf61cca
Step 10/20 : RUN ln -s libpcap.so.1 /usr/lib/libpcap.so
 ---> Running in 16894fed3e01
 ---> 8a1a160bc702
Removing intermediate container 16894fed3e01
Step 11/20 : RUN ssh-keygen -A ; echo PermitRootLogin yes >> /etc/ssh/sshd_config ; sed -ie '/^root/s#^.*$#root:$6$Ndt1G5AYZFQ8rz7m$7vGZMKKotSYxwxk/.jMfuOCzxw0I3DNedygaQaLF7kYSYsLqiBHhmc8RJSXp8/VxSYPpgYSz/8fkv0hO6I4js.:17477:0:::::#' /etc/shadow
 ---> Running in 00edc160a9b6
ssh-keygen: generating new host keys: RSA DSA ECDSA ED25519 
 ---> e306d8868b22
Removing intermediate container 00edc160a9b6
Step 12/20 : COPY --from=xen-tools / /
 ---> 8b036e5bc57a
Step 13/20 : COPY --from=ztools / /
 ---> b01aaae78ba9
Step 14/20 : COPY --from=gpttools / /
 ---> 095ab22303d0
Step 15/20 : COPY --from=dnsmasq /usr/sbin/dnsmasq /opt/zededa/bin/dnsmasq
 ---> df30f51d06b4
Step 16/20 : COPY --from=strongswan / /
 ---> 30a72f92995d
Step 17/20 : COPY --from=watchdog /usr/sbin /usr/sbin
 ---> bbcda18a3012
Step 18/20 : COPY rootfs/ /
 ---> 3be50ca36976
Step 19/20 : CMD /init.sh
 ---> Running in 7f52d8d8dd96
 ---> 60e77c498173
Removing intermediate container 7f52d8d8dd96
Step 20/20 : LABEL org.mobyproject.config '{"capabilities":["all"],"binds":["/dev:/dev","/etc/resolv.conf:/etc/resolv.conf","/run:/run","/var/log:/var/log/dom0","/:/hostfs"],"net":"host","pid":"host"}' org.mobyproject.linuxkit.revision 'unknown' org.mobyproject.linuxkit.version 'unknown' org.opencontainers.image.revision '1d1da64e7f79b5ee77b809147eef34ebffa77747' org.opencontainers.image.source 'https://github.com/linuxkit/linuxkit'
 ---> Running in a5e86cec345f
 ---> 5aa92f522272
Removing intermediate container a5e86cec345f
Successfully built 5aa92f522272
Successfully tagged zededa/zedctr:d4953285c6c5ea0dce2e64bf840e29eee1ae2615-arm64
Pushing zededa/zedctr:d4953285c6c5ea0dce2e64bf840e29eee1ae2615-arm64
The push refers to a repository [docker.io/zededa/zedctr]
ad17d696927e: Preparing
81d29851076a: Preparing
2395b6a8a790: Preparing
adb983044bb4: Preparing
3edd81ed8cbc: Preparing
981b7b269978: Preparing
ea863c8b2659: Preparing
5bdd4b180cac: Preparing
e42c7e11655c: Preparing
596a7ed20b05: Preparing
d34d49bc5613: Preparing
7678a2257549: Preparing
199db0687ace: Preparing
981b7b269978: Waiting
ea863c8b2659: Waiting
5bdd4b180cac: Waiting
e42c7e11655c: Waiting
596a7ed20b05: Waiting
d34d49bc5613: Waiting
7678a2257549: Waiting
199db0687ace: Waiting
2395b6a8a790: Layer already exists
3edd81ed8cbc: Layer already exists
ad17d696927e: Layer already exists
ea863c8b2659: Layer already exists
981b7b269978: Layer already exists
adb983044bb4: Pushed
5bdd4b180cac: Pushed
7678a2257549: Layer already exists
81d29851076a: Pushed
199db0687ace: Layer already exists
e42c7e11655c: Pushed
596a7ed20b05: Pushed
d34d49bc5613: Pushed
d4953285c6c5ea0dce2e64bf840e29eee1ae2615-arm64: digest: sha256:5616473268c4a17c07e4e0541432c4295c2394df9553279f7d70903c09e112be size: 3047
Pushing zededa/zedctr:d4953285c6c5ea0dce2e64bf840e29eee1ae2615-arm64 to manifest zededa/zedctr:d4953285c6c5ea0dce2e64bf840e29eee1ae2615
time="2018-06-26T08:08:45+02:00" level=warning msg="Couldn't find or access image reference \"zededa/zedctr:d4953285c6c5ea0dce2e64bf840e29eee1ae2615-s390x\". Skipping image."
Digest: sha256:cea1e855d2b4460c08e0d64bb976afcca9946ddba9b3d89405815b82e211842b 743
Not signing zededa/zedctr:d4953285c6c5ea0dce2e64bf840e29eee1ae2615
Build and push complete, not releasing, all done.
make: Leaving directory '/home/zededa-ci/src/zenbuild/pkg'
make: Entering directory '/home/zededa-ci/src/zenbuild/build-pkgs'
Building and pushing "zededa/build-pkgs_abuild:7ae4d9f9fa290963de466d5ed96d6c9318354824"
7ae4d9f9fa290963de466d5ed96d6c9318354824: Pulling from zededa/build-pkgs_abuild
Digest: sha256:6b128844f5ca92dd2c1ab69701fd6d65cc954934074aa23a8b1c5a16cafca7bd
Status: Image is up to date for zededa/build-pkgs_abuild:7ae4d9f9fa290963de466d5ed96d6c9318354824
Building and pushing "zededa/build-pkgs_uefi:a3362428c518fb4db1a136a961bd17e8a66fb693"
a3362428c518fb4db1a136a961bd17e8a66fb693: Pulling from zededa/build-pkgs_uefi
Digest: sha256:e5b5282993c40b2eb160b8c6d2a916e3fa5e372367ce2d972633184dee99701a
Status: Image is up to date for zededa/build-pkgs_uefi:a3362428c518fb4db1a136a961bd17e8a66fb693
make: Leaving directory '/home/zededa-ci/src/zenbuild/build-pkgs'
cd bios ; _() { C=`docker create $1 fake` ; docker export $C | tar -xf - $2 ; docker rm $C ; } ; _ zededa/build-pkgs_uefi:a3362428c518fb4db1a136a961bd17e8a66fb693-arm64 OVMF.fd
b92fe8ba9d5a074b3c401cc275a22c301272ca64faebfb6db52a5e0ee0ee7ada
make -C build-tools all
make[1]: Entering directory '/home/zededa-ci/src/zenbuild/build-tools'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/home/zededa-ci/src/zenbuild/build-tools'
tee: /dev/tty: No such device or address
d4953285c6c5ea0dce2e64bf840e29eee1ae2615-arm64: Pulling from zededa/zedctr
Digest: sha256:5616473268c4a17c07e4e0541432c4295c2394df9553279f7d70903c09e112be
Status: Image is up to date for zededa/zedctr:d4953285c6c5ea0dce2e64bf840e29eee1ae2615-arm64
DOCKER_ARCH_TAG="arm64" ./parse-pkgs.sh images/installer.yml.in > images/installer.yml
# the following is a horrible hack that needs to go away ASAP
if [ "aarch64" != `uname -m` ] ; then \
           sed -e '/source:/s#rootfs.img#rootfs_aarch64.img#' \
               -e '/command:/s#/dev/sda#/dev/vda#' -i.orig images/installer.yml ;\
   echo "WARNING: We are assembling a aarch64 image on `uname -m`. Things may break." ;\
        fi
DOCKER_ARCH_TAG="arm64" ./parse-pkgs.sh images/rootfs.yml.in > images/rootfs.yml
# the following is a horrible hack that needs to go away ASAP
if [ "aarch64" != `uname -m` ] ; then \
           sed -e '/source:/s#rootfs.img#rootfs_aarch64.img#' \
               -e '/command:/s#/dev/sda#/dev/vda#' -i.orig images/rootfs.yml ;\
   echo "WARNING: We are assembling a aarch64 image on `uname -m`. Things may break." ;\
        fi
./makerootfs.sh images/rootfs.yml squash rootfs_aarch64.img
Extract kernel image: zededa/kernel:e8accf1611206572eef0d8e24fa325e6488bdc7b-arm64
Add init containers:
Process init image: zededa/grub:35eb3c470422d1bced11f3457ea8ff432d9f0590-arm64
Process init image: zededa/device-trees:1bca882c64827de08bba9aa7713441b2b4d7ca8d-arm64
Process init image: zededa/xen:07f48fb845ebcbb4327b6493875a846d0e4ffd3b-arm64
Process init image: zededa/gpt-tools:f0be39997551891e81c6edc38acc20f61077287b-arm64
Process init image: zededa/dom0-ztools:c6d8f2123c748379add5d3dbbac23e3630131760-arm64
Process init image: linuxkit/init:v0.3
Process init image: linuxkit/runc:v0.3
Process init image: linuxkit/containerd:v0.3
Process init image: linuxkit/getty:v0.3
Add onboot containers:
  Create OCI config for linuxkit/sysctl:v0.3
  Create OCI config for linuxkit/modprobe:v0.3
Add service containers:
  Create OCI config for linuxkit/dhcpcd:v0.3
  Create OCI config for linuxkit/openntpd:v0.3
  Create OCI config for zededa/wwan:addf826bbc6885c0a28cd8f018f69cadaca4674f-arm64
  Create OCI config for zededa/wlan:cfd366430df0620df11b2af7f3d9d63d617a5903-arm64
  Create OCI config for zededa/zedctr:d4953285c6c5ea0dce2e64bf840e29eee1ae2615-arm64
Add files:
  /containers/services/zededa-tools/lower/opt/zededa/bin/versioninfo
Parallel mksquashfs: Using 4 processors
Creating 4.0 filesystem on /rootfs.img, block size 131072.
[=======-                                                    ]  1800/14686  12%[==================================================/         ] 12500/14686  85%[===========================================================|] 14686/14686 100%

Exportable Squashfs 4.0 filesystem, gzip compressed, data block size 131072
	compressed data, compressed metadata, compressed fragments, compressed xattrs
	duplicates are removed
Filesystem size 161748.58 Kbytes (157.96 Mbytes)
	31.66% of uncompressed filesystem size (510832.47 Kbytes)
Inode table size 155259 bytes (151.62 Kbytes)
	26.04% of uncompressed inode table size (596318 bytes)
Directory table size 158884 bytes (155.16 Kbytes)
	45.06% of uncompressed directory table size (352609 bytes)
Number of duplicate files found 2797
Number of inodes 15888
Number of files 11634
Number of fragments 787
Number of symbolic links  2945
Number of device nodes 8
Number of fifo nodes 0
Number of socket nodes 0
Number of directories 1301
Number of ids (unique uids + gids) 3
Number of uids 1
	root (0)
Number of gids 3
	root (0)
	shadow (42)
	tty (5)
./makeiso.sh images/installer.yml installer_aarch64.iso
Extract kernel image: zededa/kernel:e8accf1611206572eef0d8e24fa325e6488bdc7b-arm64
Add init containers:
Process init image: zededa/grub:35eb3c470422d1bced11f3457ea8ff432d9f0590-arm64
Process init image: zededa/device-trees:1bca882c64827de08bba9aa7713441b2b4d7ca8d-arm64
Process init image: zededa/xen:07f48fb845ebcbb4327b6493875a846d0e4ffd3b-arm64
Process init image: linuxkit/init:v0.3
Process init image: linuxkit/runc:v0.3
Process init image: linuxkit/getty:v0.3
Add onboot containers:
  Create OCI config for zededa/mkflash:362411f3b96bd6054f97237f5a7382912aebb349-arm64
Add files:
  /parts/config.img
  /parts/rootfs.img
time="2018-06-26T08:11:29+02:00" level=fatal msg="failed to add filesystem parts: open rootfs.img: no such file or directory"
xorriso 1.4.6 : RockRidge filesystem manipulator, libburnia project.

Drive current: -outdev 'stdio:linuxkit-efi.iso'
Media current: stdio file, overwriteable
Media status : is blank
Media summary: 0 sessions, 0 data blocks, 0 data,  846g free
Added to ISO image: directory '/'='/tmp/efi'
xorriso : UPDATE : 4673 files added in 1 seconds
xorriso : UPDATE : 4673 files added in 1 seconds
libisofs: NOTE : Cannot arrange content of data files in surely reproducible way
xorriso : UPDATE :  15.14% done
ISO image produced: 100093 sectors
Written to medium : 100093 sectors at LBA 0
Writing to 'stdio:linuxkit-efi.iso' completed successfully.

tar c rootfs_aarch64.img config.img | ./makeflash.sh -C 8192 fallback_aarch64.raw
1+0 records in
1+0 records out
1 byte copied, 0.00682591 s, 0.1 kB/s
+ IMGFILE=/output.img
+ NUMPARTS=9
+ mkdir -p /parts
+ [ -t 0 ]
+ cd /parts
+ bsdtar xzf -
+ ESP_FILE=/tmp/efifs.img
+ cut -f1 -d 
+ echo /parts/rootfs_aarch64.img
+ IMGA_FILE=/parts/rootfs_aarch64.img
+ CONF_FILE=/parts/config.img
+ mount -o loop /parts/rootfs_aarch64.img /mnt
mount: mounting /dev/loop0 on /mnt failed: Invalid argument
Makefile:150: recipe for target 'fallback_aarch64.raw' failed
make: *** [fallback_aarch64.raw] Error 111
make: Entering directory '/home/zededa-ci/src/zenbuild/build-pkgs'
Building and pushing "zededa/zenix:latest"
Sending build context to Docker daemon  517.3MB
Step 1/9 : FROM alpine:edge
 ---> 698b28d4f8d1
Step 2/9 : RUN apk add --no-cache qemu-system-x86_64 qemu-system-aarch64 bash make git
 ---> Using cache
 ---> 5b21459beb8b
Step 3/9 : COPY . /bits/
 ---> Using cache
 ---> c5f345eda82a
Step 4/9 : COPY OVMF.fd /bits/bios/OVMF.fd
 ---> Using cache
 ---> e342e4ec1c5c
Step 5/9 : COPY runme.sh /
 ---> Using cache
 ---> c300c2ff8dc7
Step 6/9 : RUN touch /bits/bios/OVMF.fd
 ---> Using cache
 ---> 85b9a3f966f3
Step 7/9 : WORKDIR /bits
 ---> Using cache
 ---> b59a8adaf13d
Step 8/9 : ENTRYPOINT /runme.sh
 ---> Using cache
 ---> a2c4b6771d85
Step 9/9 : LABEL org.mobyproject.linuxkit.revision 'unknown' org.mobyproject.linuxkit.version 'unknown' org.opencontainers.image.revision '1d1da64e7f79b5ee77b809147eef34ebffa77747' org.opencontainers.image.source 'https://github.com/linuxkit/linuxkit'
 ---> Using cache
 ---> f400d1a536b9
Successfully built f400d1a536b9
Successfully tagged zededa/zenix:latest-arm64
Pushing zededa/zenix:latest-arm64
The push refers to a repository [docker.io/zededa/zenix]
96feea203423: Preparing
c96588d795bb: Preparing
5ef670ff3c99: Preparing
841a93c06d96: Preparing
18d6c5bbfc56: Preparing
7f4507898901: Preparing
2a2e682c36db: Preparing
7f4507898901: Waiting
2a2e682c36db: Waiting
841a93c06d96: Layer already exists
96feea203423: Layer already exists
5ef670ff3c99: Layer already exists
18d6c5bbfc56: Layer already exists
c96588d795bb: Layer already exists
7f4507898901: Layer already exists
2a2e682c36db: Layer already exists
latest-arm64: digest: sha256:3c8872badc324ecd9002c52ed538468797f09f3983df2af41baed6bb47b7f6ca size: 1787
Pushing zededa/zenix:latest-arm64 to manifest zededa/zenix:latest
time="2018-06-26T08:12:27+02:00" level=warning msg="Couldn't find or access image reference \"zededa/zenix:latest-s390x\". Skipping image."
Digest: sha256:24dcfc9c0df11af4605793f7674f92b5b84c0cfc7841ece65c835a8bb478d83e 743
Not signing zededa/zenix:latest
Build and push complete, not releasing, all done.
make: Leaving directory '/home/zededa-ci/src/zenbuild/build-pkgs'
FINISHED
